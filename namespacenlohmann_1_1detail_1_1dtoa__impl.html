<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fiscat: Пространство имен nlohmann::detail::dtoa_impl</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header-kassa-f.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fiscat
   </div>
   <div id="projectbrief">FisGo software documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.15 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Поиск');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacenlohmann.html">nlohmann</a></li><li class="navelem"><a class="el" href="namespacenlohmann_1_1detail.html">detail</a></li><li class="navelem"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html">dtoa_impl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Классы</a> &#124;
<a href="#func-members">Функции</a> &#124;
<a href="#var-members">Переменные</a>  </div>
  <div class="headertitle">
<div class="title">Пространство имен nlohmann::detail::dtoa_impl</div>  </div>
</div><!--header-->
<div class="contents">

<p>implements the Grisu2 algorithm for binary to decimal floating-point conversion.  
<a href="#details">Подробнее...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Классы</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries.html">boundaries</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power.html">cached_power</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Функции</h2></td></tr>
<tr class="memitem:a1c5d30eb51e5e994a3f48bde104d2ce8"><td class="memTemplParams" colspan="2">template&lt;typename Target , typename Source &gt; </td></tr>
<tr class="memitem:a1c5d30eb51e5e994a3f48bde104d2ce8"><td class="memTemplItemLeft" align="right" valign="top">Target&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a1c5d30eb51e5e994a3f48bde104d2ce8">reinterpret_bits</a> (const Source source)</td></tr>
<tr class="separator:a1c5d30eb51e5e994a3f48bde104d2ce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22b6e37654ac93c6d0d9c06ec1bf5ded"><td class="memTemplParams" colspan="2">template&lt;typename FloatType &gt; </td></tr>
<tr class="memitem:a22b6e37654ac93c6d0d9c06ec1bf5ded"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries.html">boundaries</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a22b6e37654ac93c6d0d9c06ec1bf5ded">compute_boundaries</a> (FloatType value)</td></tr>
<tr class="separator:a22b6e37654ac93c6d0d9c06ec1bf5ded"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbf329a18c5cf854a3477327afd2200b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power.html">cached_power</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#adbf329a18c5cf854a3477327afd2200b">get_cached_power_for_binary_exponent</a> (<a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> e)</td></tr>
<tr class="separator:adbf329a18c5cf854a3477327afd2200b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a264df2b5a7e19b864859161f3501155e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a264df2b5a7e19b864859161f3501155e">find_largest_pow10</a> (const uint32_t n, uint32_t &amp;pow10)</td></tr>
<tr class="separator:a264df2b5a7e19b864859161f3501155e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e66e6d0f072aa4fc0627bffc5b1cbd8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9e66e6d0f072aa4fc0627bffc5b1cbd8">grisu2_round</a> (char *buf, <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> len, uint64_t dist, uint64_t delta, uint64_t rest, uint64_t ten_k)</td></tr>
<tr class="separator:a9e66e6d0f072aa4fc0627bffc5b1cbd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b899c72b0e1e3dd46d75c2b4e6bcdfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9b899c72b0e1e3dd46d75c2b4e6bcdfb">grisu2_digit_gen</a> (char *buffer, <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> &amp;length, <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> &amp;decimal_exponent, <a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a> M_minus, <a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a> w, <a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a> M_plus)</td></tr>
<tr class="separator:a9b899c72b0e1e3dd46d75c2b4e6bcdfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05b681dcb8569b9784c6dccfadb01633"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a05b681dcb8569b9784c6dccfadb01633">grisu2</a> (char *buf, <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> &amp;len, <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> &amp;decimal_exponent, <a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a> m_minus, <a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a> v, <a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a> m_plus)</td></tr>
<tr class="separator:a05b681dcb8569b9784c6dccfadb01633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab7a9670a4f4704a5d0347ad7588576b"><td class="memTemplParams" colspan="2">template&lt;typename FloatType &gt; </td></tr>
<tr class="memitem:aab7a9670a4f4704a5d0347ad7588576b"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#aab7a9670a4f4704a5d0347ad7588576b">grisu2</a> (char *buf, <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> &amp;len, <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> &amp;decimal_exponent, FloatType value)</td></tr>
<tr class="separator:aab7a9670a4f4704a5d0347ad7588576b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84733638b826eda624488f5fa4521e0b"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a84733638b826eda624488f5fa4521e0b">append_exponent</a> (char *buf, <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> e)</td></tr>
<tr class="memdesc:a84733638b826eda624488f5fa4521e0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">appends a decimal representation of e to buf  <a href="#a84733638b826eda624488f5fa4521e0b">Подробнее...</a><br /></td></tr>
<tr class="separator:a84733638b826eda624488f5fa4521e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12c1c5d8b46ba9702186445e73f86afe"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a12c1c5d8b46ba9702186445e73f86afe">format_buffer</a> (char *buf, <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> len, <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> decimal_exponent, <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> min_exp, <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> max_exp)</td></tr>
<tr class="memdesc:a12c1c5d8b46ba9702186445e73f86afe"><td class="mdescLeft">&#160;</td><td class="mdescRight">prettify v = buf * 10^decimal_exponent  <a href="#a12c1c5d8b46ba9702186445e73f86afe">Подробнее...</a><br /></td></tr>
<tr class="separator:a12c1c5d8b46ba9702186445e73f86afe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Переменные</h2></td></tr>
<tr class="memitem:ac1ea1316de0b4a219f707c76b1db1966"><td class="memItemLeft" align="right" valign="top">constexpr <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#ac1ea1316de0b4a219f707c76b1db1966">kAlpha</a> = -60</td></tr>
<tr class="separator:ac1ea1316de0b4a219f707c76b1db1966"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a750fcc38da1ce68b7e25ab3a230e20"><td class="memItemLeft" align="right" valign="top">constexpr <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a4a750fcc38da1ce68b7e25ab3a230e20">kGamma</a> = -32</td></tr>
<tr class="separator:a4a750fcc38da1ce68b7e25ab3a230e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="textblock"><p>implements the Grisu2 algorithm for binary to decimal floating-point conversion. </p>
<p>This implementation is a slightly modified version of the reference implementation which may be obtained from <a href="http://florian.loitsch.com/publications">http://florian.loitsch.com/publications</a> (bench.tar.gz).</p>
<p>The code is distributed under the MIT license, Copyright (c) 2009 Florian Loitsch.</p>
<p>For a detailed description of the algorithm see:</p>
<p>[1] Loitsch, "Printing Floating-Point Numbers Quickly and Accurately with
    Integers", Proceedings of the ACM SIGPLAN 2010 Conference on Programming Language Design and Implementation, PLDI 2010 [2] Burger, Dybvig, "Printing Floating-Point Numbers Quickly and Accurately", Proceedings of the ACM SIGPLAN 1996 Conference on Programming Language Design and Implementation, PLDI 1996 </p>
</div><h2 class="groupheader">Функции</h2>
<a id="a84733638b826eda624488f5fa4521e0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84733638b826eda624488f5fa4521e0b">&#9670;&nbsp;</a></span>append_exponent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* nlohmann::detail::dtoa_impl::append_exponent </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a>&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>appends a decimal representation of e to buf </p>
<dl class="section return"><dt>Возвращает</dt><dd>a pointer to the element following the exponent. </dd></dl>
<dl class="section pre"><dt>Предусловие</dt><dd>-1000 &lt; e &lt; 1000 </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="jsonParser_8h_source.html">jsonParser.h</a> строка <a class="el" href="jsonParser_8h_source.html#l09563">9563</a></p>
<div class="fragment"><div class="line"><a name="l09564"></a><span class="lineno"> 9564</span>&#160;{</div><div class="line"><a name="l09565"></a><span class="lineno"> 9565</span>&#160;    assert(e &gt; -1000);</div><div class="line"><a name="l09566"></a><span class="lineno"> 9566</span>&#160;    assert(e &lt;  1000);</div><div class="line"><a name="l09567"></a><span class="lineno"> 9567</span>&#160;</div><div class="line"><a name="l09568"></a><span class="lineno"> 9568</span>&#160;    <span class="keywordflow">if</span> (e &lt; 0)</div><div class="line"><a name="l09569"></a><span class="lineno"> 9569</span>&#160;    {</div><div class="line"><a name="l09570"></a><span class="lineno"> 9570</span>&#160;        e = -e;</div><div class="line"><a name="l09571"></a><span class="lineno"> 9571</span>&#160;        *buf++ = <span class="charliteral">&#39;-&#39;</span>;</div><div class="line"><a name="l09572"></a><span class="lineno"> 9572</span>&#160;    }</div><div class="line"><a name="l09573"></a><span class="lineno"> 9573</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l09574"></a><span class="lineno"> 9574</span>&#160;    {</div><div class="line"><a name="l09575"></a><span class="lineno"> 9575</span>&#160;        *buf++ = <span class="charliteral">&#39;+&#39;</span>;</div><div class="line"><a name="l09576"></a><span class="lineno"> 9576</span>&#160;    }</div><div class="line"><a name="l09577"></a><span class="lineno"> 9577</span>&#160;</div><div class="line"><a name="l09578"></a><span class="lineno"> 9578</span>&#160;    uint32_t k = static_cast&lt;uint32_t&gt;(e);</div><div class="line"><a name="l09579"></a><span class="lineno"> 9579</span>&#160;    <span class="keywordflow">if</span> (k &lt; 10)</div><div class="line"><a name="l09580"></a><span class="lineno"> 9580</span>&#160;    {</div><div class="line"><a name="l09581"></a><span class="lineno"> 9581</span>&#160;        <span class="comment">// Always print at least two digits in the exponent.</span></div><div class="line"><a name="l09582"></a><span class="lineno"> 9582</span>&#160;        <span class="comment">// This is for compatibility with printf(&quot;%g&quot;).</span></div><div class="line"><a name="l09583"></a><span class="lineno"> 9583</span>&#160;        *buf++ = <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l09584"></a><span class="lineno"> 9584</span>&#160;        *buf++ = static_cast&lt;char&gt;(<span class="charliteral">&#39;0&#39;</span> + k);</div><div class="line"><a name="l09585"></a><span class="lineno"> 9585</span>&#160;    }</div><div class="line"><a name="l09586"></a><span class="lineno"> 9586</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (k &lt; 100)</div><div class="line"><a name="l09587"></a><span class="lineno"> 9587</span>&#160;    {</div><div class="line"><a name="l09588"></a><span class="lineno"> 9588</span>&#160;        *buf++ = static_cast&lt;char&gt;(<span class="charliteral">&#39;0&#39;</span> + k / 10);</div><div class="line"><a name="l09589"></a><span class="lineno"> 9589</span>&#160;        k %= 10;</div><div class="line"><a name="l09590"></a><span class="lineno"> 9590</span>&#160;        *buf++ = static_cast&lt;char&gt;(<span class="charliteral">&#39;0&#39;</span> + k);</div><div class="line"><a name="l09591"></a><span class="lineno"> 9591</span>&#160;    }</div><div class="line"><a name="l09592"></a><span class="lineno"> 9592</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l09593"></a><span class="lineno"> 9593</span>&#160;    {</div><div class="line"><a name="l09594"></a><span class="lineno"> 9594</span>&#160;        *buf++ = static_cast&lt;char&gt;(<span class="charliteral">&#39;0&#39;</span> + k / 100);</div><div class="line"><a name="l09595"></a><span class="lineno"> 9595</span>&#160;        k %= 100;</div><div class="line"><a name="l09596"></a><span class="lineno"> 9596</span>&#160;        *buf++ = static_cast&lt;char&gt;(<span class="charliteral">&#39;0&#39;</span> + k / 10);</div><div class="line"><a name="l09597"></a><span class="lineno"> 9597</span>&#160;        k %= 10;</div><div class="line"><a name="l09598"></a><span class="lineno"> 9598</span>&#160;        *buf++ = static_cast&lt;char&gt;(<span class="charliteral">&#39;0&#39;</span> + k);</div><div class="line"><a name="l09599"></a><span class="lineno"> 9599</span>&#160;    }</div><div class="line"><a name="l09600"></a><span class="lineno"> 9600</span>&#160;</div><div class="line"><a name="l09601"></a><span class="lineno"> 9601</span>&#160;    <span class="keywordflow">return</span> buf;</div><div class="line"><a name="l09602"></a><span class="lineno"> 9602</span>&#160;}</div></div><!-- fragment -->
<p class="reference">Используется в <a class="el" href="jsonParser_8h_source.html#l09613">format_buffer()</a>.</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_a84733638b826eda624488f5fa4521e0b_icgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_a84733638b826eda624488f5fa4521e0b_icgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_a84733638b826eda624488f5fa4521e0b_icgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_a84733638b826eda624488f5fa4521e0b_icgraph">
<area shape="rect"  title="appends a decimal representation of e to buf" alt="" coords="613,5,776,47"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a12c1c5d8b46ba9702186445e73f86afe" title="prettify v = buf * 10^decimal_exponent" alt="" coords="415,5,565,47"/>
<area shape="rect"  href="namespacenlohmann_1_1detail.html#a6192f1eab05fbbc5c35edb8368c8fc57" title="generates a decimal representation of the floating&#45;point number value in [first, last)." alt="" coords="231,5,367,47"/>
<area shape="rect"  href="classnlohmann_1_1detail_1_1serializer.html#a24b0fe45dc774441237bde198a133d8a" title=" " alt="" coords="5,5,183,47"/>
</map>
</div>

</div>
</div>
<a id="a22b6e37654ac93c6d0d9c06ec1bf5ded"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22b6e37654ac93c6d0d9c06ec1bf5ded">&#9670;&nbsp;</a></span>compute_boundaries()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename FloatType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1boundaries.html">boundaries</a> nlohmann::detail::dtoa_impl::compute_boundaries </td>
          <td>(</td>
          <td class="paramtype">FloatType&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute the (normalized) diyfp representing the input number 'value' and its boundaries.</p>
<dl class="section pre"><dt>Предусловие</dt><dd>value must be finite and positive </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="jsonParser_8h_source.html">jsonParser.h</a> строка <a class="el" href="jsonParser_8h_source.html#l08826">8826</a></p>
<div class="fragment"><div class="line"><a name="l08827"></a><span class="lineno"> 8827</span>&#160;{</div><div class="line"><a name="l08828"></a><span class="lineno"> 8828</span>&#160;    assert(std::isfinite(value));</div><div class="line"><a name="l08829"></a><span class="lineno"> 8829</span>&#160;    assert(value &gt; 0);</div><div class="line"><a name="l08830"></a><span class="lineno"> 8830</span>&#160;</div><div class="line"><a name="l08831"></a><span class="lineno"> 8831</span>&#160;    <span class="comment">// Convert the IEEE representation into a diyfp.</span></div><div class="line"><a name="l08832"></a><span class="lineno"> 8832</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08833"></a><span class="lineno"> 8833</span>&#160;    <span class="comment">// If v is denormal:</span></div><div class="line"><a name="l08834"></a><span class="lineno"> 8834</span>&#160;    <span class="comment">//      value = 0.F * 2^(1 - bias) = (          F) * 2^(1 - bias - (p-1))</span></div><div class="line"><a name="l08835"></a><span class="lineno"> 8835</span>&#160;    <span class="comment">// If v is normalized:</span></div><div class="line"><a name="l08836"></a><span class="lineno"> 8836</span>&#160;    <span class="comment">//      value = 1.F * 2^(E - bias) = (2^(p-1) + F) * 2^(E - bias - (p-1))</span></div><div class="line"><a name="l08837"></a><span class="lineno"> 8837</span>&#160;</div><div class="line"><a name="l08838"></a><span class="lineno"> 8838</span>&#160;    static_assert(std::numeric_limits&lt;FloatType&gt;::is_iec559,</div><div class="line"><a name="l08839"></a><span class="lineno"> 8839</span>&#160;                  <span class="stringliteral">&quot;internal error: dtoa_short requires an IEEE-754 floating-point implementation&quot;</span>);</div><div class="line"><a name="l08840"></a><span class="lineno"> 8840</span>&#160;</div><div class="line"><a name="l08841"></a><span class="lineno"> 8841</span>&#160;    constexpr <span class="keywordtype">int</span>      kPrecision = std::numeric_limits&lt;FloatType&gt;::digits; <span class="comment">// = p (includes the hidden bit)</span></div><div class="line"><a name="l08842"></a><span class="lineno"> 8842</span>&#160;    constexpr <span class="keywordtype">int</span>      kBias      = std::numeric_limits&lt;FloatType&gt;::max_exponent - 1 + (kPrecision - 1);</div><div class="line"><a name="l08843"></a><span class="lineno"> 8843</span>&#160;    constexpr <span class="keywordtype">int</span>      kMinExp    = 1 - kBias;</div><div class="line"><a name="l08844"></a><span class="lineno"> 8844</span>&#160;    constexpr uint64_t kHiddenBit = uint64_t{1} &lt;&lt; (kPrecision - 1); <span class="comment">// = 2^(p-1)</span></div><div class="line"><a name="l08845"></a><span class="lineno"> 8845</span>&#160;</div><div class="line"><a name="l08846"></a><span class="lineno"> 8846</span>&#160;    <span class="keyword">using</span> bits_type = <span class="keyword">typename</span> std::conditional&lt; kPrecision == 24, uint32_t, uint64_t &gt;::type;</div><div class="line"><a name="l08847"></a><span class="lineno"> 8847</span>&#160;</div><div class="line"><a name="l08848"></a><span class="lineno"> 8848</span>&#160;    <span class="keyword">const</span> uint64_t bits = reinterpret_bits&lt;bits_type&gt;(value);</div><div class="line"><a name="l08849"></a><span class="lineno"> 8849</span>&#160;    <span class="keyword">const</span> uint64_t E = bits &gt;&gt; (kPrecision - 1);</div><div class="line"><a name="l08850"></a><span class="lineno"> 8850</span>&#160;    <span class="keyword">const</span> uint64_t F = bits &amp; (kHiddenBit - 1);</div><div class="line"><a name="l08851"></a><span class="lineno"> 8851</span>&#160;</div><div class="line"><a name="l08852"></a><span class="lineno"> 8852</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_denormal = (E == 0);</div><div class="line"><a name="l08853"></a><span class="lineno"> 8853</span>&#160;    <span class="keyword">const</span> diyfp v = is_denormal</div><div class="line"><a name="l08854"></a><span class="lineno"> 8854</span>&#160;                    ? diyfp(F, kMinExp)</div><div class="line"><a name="l08855"></a><span class="lineno"> 8855</span>&#160;                    : diyfp(F + kHiddenBit, static_cast&lt;<a class="code" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a>&gt;(E) - kBias);</div><div class="line"><a name="l08856"></a><span class="lineno"> 8856</span>&#160;</div><div class="line"><a name="l08857"></a><span class="lineno"> 8857</span>&#160;    <span class="comment">// Compute the boundaries m- and m+ of the floating-point value</span></div><div class="line"><a name="l08858"></a><span class="lineno"> 8858</span>&#160;    <span class="comment">// v = f * 2^e.</span></div><div class="line"><a name="l08859"></a><span class="lineno"> 8859</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08860"></a><span class="lineno"> 8860</span>&#160;    <span class="comment">// Determine v- and v+, the floating-point predecessor and successor if v,</span></div><div class="line"><a name="l08861"></a><span class="lineno"> 8861</span>&#160;    <span class="comment">// respectively.</span></div><div class="line"><a name="l08862"></a><span class="lineno"> 8862</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08863"></a><span class="lineno"> 8863</span>&#160;    <span class="comment">//      v- = v - 2^e        if f != 2^(p-1) or e == e_min                (A)</span></div><div class="line"><a name="l08864"></a><span class="lineno"> 8864</span>&#160;    <span class="comment">//         = v - 2^(e-1)    if f == 2^(p-1) and e &gt; e_min                (B)</span></div><div class="line"><a name="l08865"></a><span class="lineno"> 8865</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08866"></a><span class="lineno"> 8866</span>&#160;    <span class="comment">//      v+ = v + 2^e</span></div><div class="line"><a name="l08867"></a><span class="lineno"> 8867</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08868"></a><span class="lineno"> 8868</span>&#160;    <span class="comment">// Let m- = (v- + v) / 2 and m+ = (v + v+) / 2. All real numbers _strictly_</span></div><div class="line"><a name="l08869"></a><span class="lineno"> 8869</span>&#160;    <span class="comment">// between m- and m+ round to v, regardless of how the input rounding</span></div><div class="line"><a name="l08870"></a><span class="lineno"> 8870</span>&#160;    <span class="comment">// algorithm breaks ties.</span></div><div class="line"><a name="l08871"></a><span class="lineno"> 8871</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08872"></a><span class="lineno"> 8872</span>&#160;    <span class="comment">//      ---+-------------+-------------+-------------+-------------+---  (A)</span></div><div class="line"><a name="l08873"></a><span class="lineno"> 8873</span>&#160;    <span class="comment">//         v-            m-            v             m+            v+</span></div><div class="line"><a name="l08874"></a><span class="lineno"> 8874</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08875"></a><span class="lineno"> 8875</span>&#160;    <span class="comment">//      -----------------+------+------+-------------+-------------+---  (B)</span></div><div class="line"><a name="l08876"></a><span class="lineno"> 8876</span>&#160;    <span class="comment">//                       v-     m-     v             m+            v+</span></div><div class="line"><a name="l08877"></a><span class="lineno"> 8877</span>&#160;</div><div class="line"><a name="l08878"></a><span class="lineno"> 8878</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> lower_boundary_is_closer = (F == 0 and E &gt; 1);</div><div class="line"><a name="l08879"></a><span class="lineno"> 8879</span>&#160;    <span class="keyword">const</span> diyfp m_plus = diyfp(2 * v.f + 1, v.e - 1);</div><div class="line"><a name="l08880"></a><span class="lineno"> 8880</span>&#160;    <span class="keyword">const</span> diyfp m_minus = lower_boundary_is_closer</div><div class="line"><a name="l08881"></a><span class="lineno"> 8881</span>&#160;                          ? diyfp(4 * v.f - 1, v.e - 2)  <span class="comment">// (B)</span></div><div class="line"><a name="l08882"></a><span class="lineno"> 8882</span>&#160;                          : diyfp(2 * v.f - 1, v.e - 1); <span class="comment">// (A)</span></div><div class="line"><a name="l08883"></a><span class="lineno"> 8883</span>&#160;</div><div class="line"><a name="l08884"></a><span class="lineno"> 8884</span>&#160;    <span class="comment">// Determine the normalized w+ = m+.</span></div><div class="line"><a name="l08885"></a><span class="lineno"> 8885</span>&#160;    <span class="keyword">const</span> diyfp w_plus = diyfp::normalize(m_plus);</div><div class="line"><a name="l08886"></a><span class="lineno"> 8886</span>&#160;</div><div class="line"><a name="l08887"></a><span class="lineno"> 8887</span>&#160;    <span class="comment">// Determine w- = m- such that e_(w-) = e_(w+).</span></div><div class="line"><a name="l08888"></a><span class="lineno"> 8888</span>&#160;    <span class="keyword">const</span> diyfp w_minus = diyfp::normalize_to(m_minus, w_plus.e);</div><div class="line"><a name="l08889"></a><span class="lineno"> 8889</span>&#160;</div><div class="line"><a name="l08890"></a><span class="lineno"> 8890</span>&#160;    <span class="keywordflow">return</span> {diyfp::normalize(v), w_minus, w_plus};</div><div class="line"><a name="l08891"></a><span class="lineno"> 8891</span>&#160;}</div><div class="ttc" id="testGlobalFuncMock_8h_html_a882197d618d1823462b68dc16270232c"><div class="ttname"><a href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a></div><div class="ttdeci">int(string &amp;))</div></div>
</div><!-- fragment -->
<p class="reference">Перекрестные ссылки <a class="el" href="jsonParser_8h_source.html#l08698">nlohmann::detail::dtoa_impl::diyfp::e</a>, <a class="el" href="jsonParser_8h_source.html#l08697">nlohmann::detail::dtoa_impl::diyfp::f</a>, <a class="el" href="jsonParser_8h_source.html#l08784">nlohmann::detail::dtoa_impl::diyfp::normalize()</a> и <a class="el" href="jsonParser_8h_source.html#l08801">nlohmann::detail::dtoa_impl::diyfp::normalize_to()</a>.</p>

<p class="reference">Используется в <a class="el" href="jsonParser_8h_source.html#l09525">grisu2()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded_cgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded_cgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded_cgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded_cgraph">
<area shape="rect"  title=" " alt="" coords="5,39,187,80"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#a2246b5b40c7c6992153ef174063d6aa6" title="normalize x such that the significand is &gt;= 2^(q&#45;1)" alt="" coords="243,5,397,47"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#a6b6665e467ebabe0c0f7418d3fe4b118" title="normalize x such that the result has the exponent E" alt="" coords="235,71,405,112"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#a23d25b3ad4527270a6e3f2a0bcca11e6" title=" " alt="" coords="453,71,604,112"/>
</map>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded_icgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded_icgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded_icgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_a22b6e37654ac93c6d0d9c06ec1bf5ded_icgraph">
<area shape="rect"  title=" " alt="" coords="204,5,385,47"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#aab7a9670a4f4704a5d0347ad7588576b" title=" " alt="" coords="5,5,156,47"/>
</map>
</div>

</div>
</div>
<a id="a264df2b5a7e19b864859161f3501155e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a264df2b5a7e19b864859161f3501155e">&#9670;&nbsp;</a></span>find_largest_pow10()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> nlohmann::detail::dtoa_impl::find_largest_pow10 </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t &amp;&#160;</td>
          <td class="paramname"><em>pow10</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For n != 0, returns k, such that pow10 := 10^(k-1) &lt;= n &lt; 10^k. For n == 0, returns 1 and sets pow10 := 1. </p>

<p class="definition">См. определение в файле <a class="el" href="jsonParser_8h_source.html">jsonParser.h</a> строка <a class="el" href="jsonParser_8h_source.html#l09129">9129</a></p>
<div class="fragment"><div class="line"><a name="l09130"></a><span class="lineno"> 9130</span>&#160;{</div><div class="line"><a name="l09131"></a><span class="lineno"> 9131</span>&#160;    <span class="comment">// LCOV_EXCL_START</span></div><div class="line"><a name="l09132"></a><span class="lineno"> 9132</span>&#160;    <span class="keywordflow">if</span> (n &gt;= 1000000000)</div><div class="line"><a name="l09133"></a><span class="lineno"> 9133</span>&#160;    {</div><div class="line"><a name="l09134"></a><span class="lineno"> 9134</span>&#160;        pow10 = 1000000000;</div><div class="line"><a name="l09135"></a><span class="lineno"> 9135</span>&#160;        <span class="keywordflow">return</span> 10;</div><div class="line"><a name="l09136"></a><span class="lineno"> 9136</span>&#160;    }</div><div class="line"><a name="l09137"></a><span class="lineno"> 9137</span>&#160;    <span class="comment">// LCOV_EXCL_STOP</span></div><div class="line"><a name="l09138"></a><span class="lineno"> 9138</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &gt;= 100000000)</div><div class="line"><a name="l09139"></a><span class="lineno"> 9139</span>&#160;    {</div><div class="line"><a name="l09140"></a><span class="lineno"> 9140</span>&#160;        pow10 = 100000000;</div><div class="line"><a name="l09141"></a><span class="lineno"> 9141</span>&#160;        <span class="keywordflow">return</span>  9;</div><div class="line"><a name="l09142"></a><span class="lineno"> 9142</span>&#160;    }</div><div class="line"><a name="l09143"></a><span class="lineno"> 9143</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &gt;= 10000000)</div><div class="line"><a name="l09144"></a><span class="lineno"> 9144</span>&#160;    {</div><div class="line"><a name="l09145"></a><span class="lineno"> 9145</span>&#160;        pow10 = 10000000;</div><div class="line"><a name="l09146"></a><span class="lineno"> 9146</span>&#160;        <span class="keywordflow">return</span>  8;</div><div class="line"><a name="l09147"></a><span class="lineno"> 9147</span>&#160;    }</div><div class="line"><a name="l09148"></a><span class="lineno"> 9148</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &gt;= 1000000)</div><div class="line"><a name="l09149"></a><span class="lineno"> 9149</span>&#160;    {</div><div class="line"><a name="l09150"></a><span class="lineno"> 9150</span>&#160;        pow10 = 1000000;</div><div class="line"><a name="l09151"></a><span class="lineno"> 9151</span>&#160;        <span class="keywordflow">return</span>  7;</div><div class="line"><a name="l09152"></a><span class="lineno"> 9152</span>&#160;    }</div><div class="line"><a name="l09153"></a><span class="lineno"> 9153</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &gt;= 100000)</div><div class="line"><a name="l09154"></a><span class="lineno"> 9154</span>&#160;    {</div><div class="line"><a name="l09155"></a><span class="lineno"> 9155</span>&#160;        pow10 = 100000;</div><div class="line"><a name="l09156"></a><span class="lineno"> 9156</span>&#160;        <span class="keywordflow">return</span>  6;</div><div class="line"><a name="l09157"></a><span class="lineno"> 9157</span>&#160;    }</div><div class="line"><a name="l09158"></a><span class="lineno"> 9158</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &gt;= 10000)</div><div class="line"><a name="l09159"></a><span class="lineno"> 9159</span>&#160;    {</div><div class="line"><a name="l09160"></a><span class="lineno"> 9160</span>&#160;        pow10 = 10000;</div><div class="line"><a name="l09161"></a><span class="lineno"> 9161</span>&#160;        <span class="keywordflow">return</span>  5;</div><div class="line"><a name="l09162"></a><span class="lineno"> 9162</span>&#160;    }</div><div class="line"><a name="l09163"></a><span class="lineno"> 9163</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &gt;= 1000)</div><div class="line"><a name="l09164"></a><span class="lineno"> 9164</span>&#160;    {</div><div class="line"><a name="l09165"></a><span class="lineno"> 9165</span>&#160;        pow10 = 1000;</div><div class="line"><a name="l09166"></a><span class="lineno"> 9166</span>&#160;        <span class="keywordflow">return</span>  4;</div><div class="line"><a name="l09167"></a><span class="lineno"> 9167</span>&#160;    }</div><div class="line"><a name="l09168"></a><span class="lineno"> 9168</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &gt;= 100)</div><div class="line"><a name="l09169"></a><span class="lineno"> 9169</span>&#160;    {</div><div class="line"><a name="l09170"></a><span class="lineno"> 9170</span>&#160;        pow10 = 100;</div><div class="line"><a name="l09171"></a><span class="lineno"> 9171</span>&#160;        <span class="keywordflow">return</span>  3;</div><div class="line"><a name="l09172"></a><span class="lineno"> 9172</span>&#160;    }</div><div class="line"><a name="l09173"></a><span class="lineno"> 9173</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &gt;= 10)</div><div class="line"><a name="l09174"></a><span class="lineno"> 9174</span>&#160;    {</div><div class="line"><a name="l09175"></a><span class="lineno"> 9175</span>&#160;        pow10 = 10;</div><div class="line"><a name="l09176"></a><span class="lineno"> 9176</span>&#160;        <span class="keywordflow">return</span>  2;</div><div class="line"><a name="l09177"></a><span class="lineno"> 9177</span>&#160;    }</div><div class="line"><a name="l09178"></a><span class="lineno"> 9178</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l09179"></a><span class="lineno"> 9179</span>&#160;    {</div><div class="line"><a name="l09180"></a><span class="lineno"> 9180</span>&#160;        pow10 = 1;</div><div class="line"><a name="l09181"></a><span class="lineno"> 9181</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l09182"></a><span class="lineno"> 9182</span>&#160;    }</div><div class="line"><a name="l09183"></a><span class="lineno"> 9183</span>&#160;}</div></div><!-- fragment -->
<p class="reference">Используется в <a class="el" href="jsonParser_8h_source.html#l09226">grisu2_digit_gen()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_a264df2b5a7e19b864859161f3501155e_icgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_a264df2b5a7e19b864859161f3501155e_icgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_a264df2b5a7e19b864859161f3501155e_icgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_a264df2b5a7e19b864859161f3501155e_icgraph">
<area shape="rect"  title=" " alt="" coords="831,39,1004,80"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9b899c72b0e1e3dd46d75c2b4e6bcdfb" title=" " alt="" coords="628,39,783,80"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a05b681dcb8569b9784c6dccfadb01633" title=" " alt="" coords="429,39,580,80"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#aab7a9670a4f4704a5d0347ad7588576b" title=" " alt="" coords="231,5,381,47"/>
<area shape="rect"  href="namespacenlohmann_1_1detail.html#a6192f1eab05fbbc5c35edb8368c8fc57" title="generates a decimal representation of the floating&#45;point number value in [first, last)." alt="" coords="238,71,374,112"/>
<area shape="rect"  href="classnlohmann_1_1detail_1_1serializer.html#a24b0fe45dc774441237bde198a133d8a" title=" " alt="" coords="5,71,183,112"/>
</map>
</div>

</div>
</div>
<a id="a12c1c5d8b46ba9702186445e73f86afe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12c1c5d8b46ba9702186445e73f86afe">&#9670;&nbsp;</a></span>format_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* nlohmann::detail::dtoa_impl::format_buffer </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a>&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a>&#160;</td>
          <td class="paramname"><em>decimal_exponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a>&#160;</td>
          <td class="paramname"><em>min_exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a>&#160;</td>
          <td class="paramname"><em>max_exp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>prettify v = buf * 10^decimal_exponent </p>
<p>If v is in the range [10^min_exp, 10^max_exp) it will be printed in fixed-point notation. Otherwise it will be printed in exponential notation.</p>
<dl class="section pre"><dt>Предусловие</dt><dd>min_exp &lt; 0 </dd>
<dd>
max_exp &gt; 0 </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="jsonParser_8h_source.html">jsonParser.h</a> строка <a class="el" href="jsonParser_8h_source.html#l09613">9613</a></p>
<div class="fragment"><div class="line"><a name="l09615"></a><span class="lineno"> 9615</span>&#160;{</div><div class="line"><a name="l09616"></a><span class="lineno"> 9616</span>&#160;    assert(min_exp &lt; 0);</div><div class="line"><a name="l09617"></a><span class="lineno"> 9617</span>&#160;    assert(max_exp &gt; 0);</div><div class="line"><a name="l09618"></a><span class="lineno"> 9618</span>&#160;</div><div class="line"><a name="l09619"></a><span class="lineno"> 9619</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> k = len;</div><div class="line"><a name="l09620"></a><span class="lineno"> 9620</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> n = len + decimal_exponent;</div><div class="line"><a name="l09621"></a><span class="lineno"> 9621</span>&#160;</div><div class="line"><a name="l09622"></a><span class="lineno"> 9622</span>&#160;    <span class="comment">// v = buf * 10^(n-k)</span></div><div class="line"><a name="l09623"></a><span class="lineno"> 9623</span>&#160;    <span class="comment">// k is the length of the buffer (number of decimal digits)</span></div><div class="line"><a name="l09624"></a><span class="lineno"> 9624</span>&#160;    <span class="comment">// n is the position of the decimal point relative to the start of the buffer.</span></div><div class="line"><a name="l09625"></a><span class="lineno"> 9625</span>&#160;</div><div class="line"><a name="l09626"></a><span class="lineno"> 9626</span>&#160;    <span class="keywordflow">if</span> (k &lt;= n and n &lt;= max_exp)</div><div class="line"><a name="l09627"></a><span class="lineno"> 9627</span>&#160;    {</div><div class="line"><a name="l09628"></a><span class="lineno"> 9628</span>&#160;        <span class="comment">// digits[000]</span></div><div class="line"><a name="l09629"></a><span class="lineno"> 9629</span>&#160;        <span class="comment">// len &lt;= max_exp + 2</span></div><div class="line"><a name="l09630"></a><span class="lineno"> 9630</span>&#160;</div><div class="line"><a name="l09631"></a><span class="lineno"> 9631</span>&#160;        std::memset(buf + k, <span class="charliteral">&#39;0&#39;</span>, static_cast&lt;size_t&gt;(n - k));</div><div class="line"><a name="l09632"></a><span class="lineno"> 9632</span>&#160;        <span class="comment">// Make it look like a floating-point number (#362, #378)</span></div><div class="line"><a name="l09633"></a><span class="lineno"> 9633</span>&#160;        buf[n + 0] = <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l09634"></a><span class="lineno"> 9634</span>&#160;        buf[n + 1] = <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l09635"></a><span class="lineno"> 9635</span>&#160;        <span class="keywordflow">return</span> buf + (n + 2);</div><div class="line"><a name="l09636"></a><span class="lineno"> 9636</span>&#160;    }</div><div class="line"><a name="l09637"></a><span class="lineno"> 9637</span>&#160;</div><div class="line"><a name="l09638"></a><span class="lineno"> 9638</span>&#160;    <span class="keywordflow">if</span> (0 &lt; n and n &lt;= max_exp)</div><div class="line"><a name="l09639"></a><span class="lineno"> 9639</span>&#160;    {</div><div class="line"><a name="l09640"></a><span class="lineno"> 9640</span>&#160;        <span class="comment">// dig.its</span></div><div class="line"><a name="l09641"></a><span class="lineno"> 9641</span>&#160;        <span class="comment">// len &lt;= max_digits10 + 1</span></div><div class="line"><a name="l09642"></a><span class="lineno"> 9642</span>&#160;</div><div class="line"><a name="l09643"></a><span class="lineno"> 9643</span>&#160;        assert(k &gt; n);</div><div class="line"><a name="l09644"></a><span class="lineno"> 9644</span>&#160;</div><div class="line"><a name="l09645"></a><span class="lineno"> 9645</span>&#160;        std::memmove(buf + (n + 1), buf + n, static_cast&lt;size_t&gt;(k - n));</div><div class="line"><a name="l09646"></a><span class="lineno"> 9646</span>&#160;        buf[n] = <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l09647"></a><span class="lineno"> 9647</span>&#160;        <span class="keywordflow">return</span> buf + (k + 1);</div><div class="line"><a name="l09648"></a><span class="lineno"> 9648</span>&#160;    }</div><div class="line"><a name="l09649"></a><span class="lineno"> 9649</span>&#160;</div><div class="line"><a name="l09650"></a><span class="lineno"> 9650</span>&#160;    <span class="keywordflow">if</span> (min_exp &lt; n and n &lt;= 0)</div><div class="line"><a name="l09651"></a><span class="lineno"> 9651</span>&#160;    {</div><div class="line"><a name="l09652"></a><span class="lineno"> 9652</span>&#160;        <span class="comment">// 0.[000]digits</span></div><div class="line"><a name="l09653"></a><span class="lineno"> 9653</span>&#160;        <span class="comment">// len &lt;= 2 + (-min_exp - 1) + max_digits10</span></div><div class="line"><a name="l09654"></a><span class="lineno"> 9654</span>&#160;</div><div class="line"><a name="l09655"></a><span class="lineno"> 9655</span>&#160;        std::memmove(buf + (2 + -n), buf, static_cast&lt;size_t&gt;(k));</div><div class="line"><a name="l09656"></a><span class="lineno"> 9656</span>&#160;        buf[0] = <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l09657"></a><span class="lineno"> 9657</span>&#160;        buf[1] = <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l09658"></a><span class="lineno"> 9658</span>&#160;        std::memset(buf + 2, <span class="charliteral">&#39;0&#39;</span>, static_cast&lt;size_t&gt;(-n));</div><div class="line"><a name="l09659"></a><span class="lineno"> 9659</span>&#160;        <span class="keywordflow">return</span> buf + (2 + (-n) + k);</div><div class="line"><a name="l09660"></a><span class="lineno"> 9660</span>&#160;    }</div><div class="line"><a name="l09661"></a><span class="lineno"> 9661</span>&#160;</div><div class="line"><a name="l09662"></a><span class="lineno"> 9662</span>&#160;    <span class="keywordflow">if</span> (k == 1)</div><div class="line"><a name="l09663"></a><span class="lineno"> 9663</span>&#160;    {</div><div class="line"><a name="l09664"></a><span class="lineno"> 9664</span>&#160;        <span class="comment">// dE+123</span></div><div class="line"><a name="l09665"></a><span class="lineno"> 9665</span>&#160;        <span class="comment">// len &lt;= 1 + 5</span></div><div class="line"><a name="l09666"></a><span class="lineno"> 9666</span>&#160;</div><div class="line"><a name="l09667"></a><span class="lineno"> 9667</span>&#160;        buf += 1;</div><div class="line"><a name="l09668"></a><span class="lineno"> 9668</span>&#160;    }</div><div class="line"><a name="l09669"></a><span class="lineno"> 9669</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l09670"></a><span class="lineno"> 9670</span>&#160;    {</div><div class="line"><a name="l09671"></a><span class="lineno"> 9671</span>&#160;        <span class="comment">// d.igitsE+123</span></div><div class="line"><a name="l09672"></a><span class="lineno"> 9672</span>&#160;        <span class="comment">// len &lt;= max_digits10 + 1 + 5</span></div><div class="line"><a name="l09673"></a><span class="lineno"> 9673</span>&#160;</div><div class="line"><a name="l09674"></a><span class="lineno"> 9674</span>&#160;        std::memmove(buf + 2, buf + 1, static_cast&lt;size_t&gt;(k - 1));</div><div class="line"><a name="l09675"></a><span class="lineno"> 9675</span>&#160;        buf[1] = <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l09676"></a><span class="lineno"> 9676</span>&#160;        buf += 1 + k;</div><div class="line"><a name="l09677"></a><span class="lineno"> 9677</span>&#160;    }</div><div class="line"><a name="l09678"></a><span class="lineno"> 9678</span>&#160;</div><div class="line"><a name="l09679"></a><span class="lineno"> 9679</span>&#160;    *buf++ = <span class="charliteral">&#39;e&#39;</span>;</div><div class="line"><a name="l09680"></a><span class="lineno"> 9680</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a84733638b826eda624488f5fa4521e0b">append_exponent</a>(buf, n - 1);</div><div class="line"><a name="l09681"></a><span class="lineno"> 9681</span>&#160;}</div><div class="ttc" id="namespacenlohmann_1_1detail_1_1dtoa__impl_html_a84733638b826eda624488f5fa4521e0b"><div class="ttname"><a href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a84733638b826eda624488f5fa4521e0b">nlohmann::detail::dtoa_impl::append_exponent</a></div><div class="ttdeci">char * append_exponent(char *buf, int e)</div><div class="ttdoc">appends a decimal representation of e to buf</div><div class="ttdef"><b>Definition:</b> <a href="jsonParser_8h_source.html#l09563">jsonParser.h:9563</a></div></div>
</div><!-- fragment -->
<p class="reference">Перекрестные ссылки <a class="el" href="jsonParser_8h_source.html#l09563">append_exponent()</a>.</p>

<p class="reference">Используется в <a class="el" href="jsonParser_8h_source.html#l09696">nlohmann::detail::to_chars()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_a12c1c5d8b46ba9702186445e73f86afe_cgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_a12c1c5d8b46ba9702186445e73f86afe_cgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_a12c1c5d8b46ba9702186445e73f86afe_cgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_a12c1c5d8b46ba9702186445e73f86afe_cgraph">
<area shape="rect"  title="prettify v = buf * 10^decimal_exponent" alt="" coords="5,5,156,47"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a84733638b826eda624488f5fa4521e0b" title="appends a decimal representation of e to buf" alt="" coords="204,5,367,47"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_a12c1c5d8b46ba9702186445e73f86afe_icgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_a12c1c5d8b46ba9702186445e73f86afe_icgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_a12c1c5d8b46ba9702186445e73f86afe_icgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_a12c1c5d8b46ba9702186445e73f86afe_icgraph">
<area shape="rect"  title="prettify v = buf * 10^decimal_exponent" alt="" coords="415,5,565,47"/>
<area shape="rect"  href="namespacenlohmann_1_1detail.html#a6192f1eab05fbbc5c35edb8368c8fc57" title="generates a decimal representation of the floating&#45;point number value in [first, last)." alt="" coords="231,5,367,47"/>
<area shape="rect"  href="classnlohmann_1_1detail_1_1serializer.html#a24b0fe45dc774441237bde198a133d8a" title=" " alt="" coords="5,5,183,47"/>
</map>
</div>

</div>
</div>
<a id="adbf329a18c5cf854a3477327afd2200b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbf329a18c5cf854a3477327afd2200b">&#9670;&nbsp;</a></span>get_cached_power_for_binary_exponent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1cached__power.html">cached_power</a> nlohmann::detail::dtoa_impl::get_cached_power_for_binary_exponent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a>&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For a normalized diyfp w = f * 2^e, this function returns a (normalized) cached power-of-ten c = f_c * 2^e_c, such that the exponent of the product w * c satisfies (Definition 3.2 from [1]) </p><pre class="fragment"> alpha &lt;= e_c + e + q &lt;= gamma.
</pre> 
<p class="definition">См. определение в файле <a class="el" href="jsonParser_8h_source.html">jsonParser.h</a> строка <a class="el" href="jsonParser_8h_source.html#l08965">8965</a></p>
<div class="fragment"><div class="line"><a name="l08966"></a><span class="lineno"> 8966</span>&#160;{</div><div class="line"><a name="l08967"></a><span class="lineno"> 8967</span>&#160;    <span class="comment">// Now</span></div><div class="line"><a name="l08968"></a><span class="lineno"> 8968</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08969"></a><span class="lineno"> 8969</span>&#160;    <span class="comment">//      alpha &lt;= e_c + e + q &lt;= gamma                                    (1)</span></div><div class="line"><a name="l08970"></a><span class="lineno"> 8970</span>&#160;    <span class="comment">//      ==&gt; f_c * 2^alpha &lt;= c * 2^e * 2^q</span></div><div class="line"><a name="l08971"></a><span class="lineno"> 8971</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08972"></a><span class="lineno"> 8972</span>&#160;    <span class="comment">// and since the c&#39;s are normalized, 2^(q-1) &lt;= f_c,</span></div><div class="line"><a name="l08973"></a><span class="lineno"> 8973</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08974"></a><span class="lineno"> 8974</span>&#160;    <span class="comment">//      ==&gt; 2^(q - 1 + alpha) &lt;= c * 2^(e + q)</span></div><div class="line"><a name="l08975"></a><span class="lineno"> 8975</span>&#160;    <span class="comment">//      ==&gt; 2^(alpha - e - 1) &lt;= c</span></div><div class="line"><a name="l08976"></a><span class="lineno"> 8976</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08977"></a><span class="lineno"> 8977</span>&#160;    <span class="comment">// If c were an exakt power of ten, i.e. c = 10^k, one may determine k as</span></div><div class="line"><a name="l08978"></a><span class="lineno"> 8978</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08979"></a><span class="lineno"> 8979</span>&#160;    <span class="comment">//      k = ceil( log_10( 2^(alpha - e - 1) ) )</span></div><div class="line"><a name="l08980"></a><span class="lineno"> 8980</span>&#160;    <span class="comment">//        = ceil( (alpha - e - 1) * log_10(2) )</span></div><div class="line"><a name="l08981"></a><span class="lineno"> 8981</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08982"></a><span class="lineno"> 8982</span>&#160;    <span class="comment">// From the paper:</span></div><div class="line"><a name="l08983"></a><span class="lineno"> 8983</span>&#160;    <span class="comment">// &quot;In theory the result of the procedure could be wrong since c is rounded,</span></div><div class="line"><a name="l08984"></a><span class="lineno"> 8984</span>&#160;    <span class="comment">//  and the computation itself is approximated [...]. In practice, however,</span></div><div class="line"><a name="l08985"></a><span class="lineno"> 8985</span>&#160;    <span class="comment">//  this simple function is sufficient.&quot;</span></div><div class="line"><a name="l08986"></a><span class="lineno"> 8986</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08987"></a><span class="lineno"> 8987</span>&#160;    <span class="comment">// For IEEE double precision floating-point numbers converted into</span></div><div class="line"><a name="l08988"></a><span class="lineno"> 8988</span>&#160;    <span class="comment">// normalized diyfp&#39;s w = f * 2^e, with q = 64,</span></div><div class="line"><a name="l08989"></a><span class="lineno"> 8989</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08990"></a><span class="lineno"> 8990</span>&#160;    <span class="comment">//      e &gt;= -1022      (min IEEE exponent)</span></div><div class="line"><a name="l08991"></a><span class="lineno"> 8991</span>&#160;    <span class="comment">//           -52        (p - 1)</span></div><div class="line"><a name="l08992"></a><span class="lineno"> 8992</span>&#160;    <span class="comment">//           -52        (p - 1, possibly normalize denormal IEEE numbers)</span></div><div class="line"><a name="l08993"></a><span class="lineno"> 8993</span>&#160;    <span class="comment">//           -11        (normalize the diyfp)</span></div><div class="line"><a name="l08994"></a><span class="lineno"> 8994</span>&#160;    <span class="comment">//         = -1137</span></div><div class="line"><a name="l08995"></a><span class="lineno"> 8995</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08996"></a><span class="lineno"> 8996</span>&#160;    <span class="comment">// and</span></div><div class="line"><a name="l08997"></a><span class="lineno"> 8997</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l08998"></a><span class="lineno"> 8998</span>&#160;    <span class="comment">//      e &lt;= +1023      (max IEEE exponent)</span></div><div class="line"><a name="l08999"></a><span class="lineno"> 8999</span>&#160;    <span class="comment">//           -52        (p - 1)</span></div><div class="line"><a name="l09000"></a><span class="lineno"> 9000</span>&#160;    <span class="comment">//           -11        (normalize the diyfp)</span></div><div class="line"><a name="l09001"></a><span class="lineno"> 9001</span>&#160;    <span class="comment">//         = 960</span></div><div class="line"><a name="l09002"></a><span class="lineno"> 9002</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09003"></a><span class="lineno"> 9003</span>&#160;    <span class="comment">// This binary exponent range [-1137,960] results in a decimal exponent</span></div><div class="line"><a name="l09004"></a><span class="lineno"> 9004</span>&#160;    <span class="comment">// range [-307,324]. One does not need to store a cached power for each</span></div><div class="line"><a name="l09005"></a><span class="lineno"> 9005</span>&#160;    <span class="comment">// k in this range. For each such k it suffices to find a cached power</span></div><div class="line"><a name="l09006"></a><span class="lineno"> 9006</span>&#160;    <span class="comment">// such that the exponent of the product lies in [alpha,gamma].</span></div><div class="line"><a name="l09007"></a><span class="lineno"> 9007</span>&#160;    <span class="comment">// This implies that the difference of the decimal exponents of adjacent</span></div><div class="line"><a name="l09008"></a><span class="lineno"> 9008</span>&#160;    <span class="comment">// table entries must be less than or equal to</span></div><div class="line"><a name="l09009"></a><span class="lineno"> 9009</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09010"></a><span class="lineno"> 9010</span>&#160;    <span class="comment">//      floor( (gamma - alpha) * log_10(2) ) = 8.</span></div><div class="line"><a name="l09011"></a><span class="lineno"> 9011</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09012"></a><span class="lineno"> 9012</span>&#160;    <span class="comment">// (A smaller distance gamma-alpha would require a larger table.)</span></div><div class="line"><a name="l09013"></a><span class="lineno"> 9013</span>&#160;</div><div class="line"><a name="l09014"></a><span class="lineno"> 9014</span>&#160;    <span class="comment">// NB:</span></div><div class="line"><a name="l09015"></a><span class="lineno"> 9015</span>&#160;    <span class="comment">// Actually this function returns c, such that -60 &lt;= e_c + e + 64 &lt;= -34.</span></div><div class="line"><a name="l09016"></a><span class="lineno"> 9016</span>&#160;</div><div class="line"><a name="l09017"></a><span class="lineno"> 9017</span>&#160;    constexpr <span class="keywordtype">int</span> kCachedPowersSize = 79;</div><div class="line"><a name="l09018"></a><span class="lineno"> 9018</span>&#160;    constexpr <span class="keywordtype">int</span> kCachedPowersMinDecExp = -300;</div><div class="line"><a name="l09019"></a><span class="lineno"> 9019</span>&#160;    constexpr <span class="keywordtype">int</span> kCachedPowersDecStep = 8;</div><div class="line"><a name="l09020"></a><span class="lineno"> 9020</span>&#160;</div><div class="line"><a name="l09021"></a><span class="lineno"> 9021</span>&#160;    <span class="keyword">static</span> constexpr cached_power kCachedPowers[] =</div><div class="line"><a name="l09022"></a><span class="lineno"> 9022</span>&#160;    {</div><div class="line"><a name="l09023"></a><span class="lineno"> 9023</span>&#160;        { 0xAB70FE17C79AC6CA, -1060, -300 },</div><div class="line"><a name="l09024"></a><span class="lineno"> 9024</span>&#160;        { 0xFF77B1FCBEBCDC4F, -1034, -292 },</div><div class="line"><a name="l09025"></a><span class="lineno"> 9025</span>&#160;        { 0xBE5691EF416BD60C, -1007, -284 },</div><div class="line"><a name="l09026"></a><span class="lineno"> 9026</span>&#160;        { 0x8DD01FAD907FFC3C,  -980, -276 },</div><div class="line"><a name="l09027"></a><span class="lineno"> 9027</span>&#160;        { 0xD3515C2831559A83,  -954, -268 },</div><div class="line"><a name="l09028"></a><span class="lineno"> 9028</span>&#160;        { 0x9D71AC8FADA6C9B5,  -927, -260 },</div><div class="line"><a name="l09029"></a><span class="lineno"> 9029</span>&#160;        { 0xEA9C227723EE8BCB,  -901, -252 },</div><div class="line"><a name="l09030"></a><span class="lineno"> 9030</span>&#160;        { 0xAECC49914078536D,  -874, -244 },</div><div class="line"><a name="l09031"></a><span class="lineno"> 9031</span>&#160;        { 0x823C12795DB6CE57,  -847, -236 },</div><div class="line"><a name="l09032"></a><span class="lineno"> 9032</span>&#160;        { 0xC21094364DFB5637,  -821, -228 },</div><div class="line"><a name="l09033"></a><span class="lineno"> 9033</span>&#160;        { 0x9096EA6F3848984F,  -794, -220 },</div><div class="line"><a name="l09034"></a><span class="lineno"> 9034</span>&#160;        { 0xD77485CB25823AC7,  -768, -212 },</div><div class="line"><a name="l09035"></a><span class="lineno"> 9035</span>&#160;        { 0xA086CFCD97BF97F4,  -741, -204 },</div><div class="line"><a name="l09036"></a><span class="lineno"> 9036</span>&#160;        { 0xEF340A98172AACE5,  -715, -196 },</div><div class="line"><a name="l09037"></a><span class="lineno"> 9037</span>&#160;        { 0xB23867FB2A35B28E,  -688, -188 },</div><div class="line"><a name="l09038"></a><span class="lineno"> 9038</span>&#160;        { 0x84C8D4DFD2C63F3B,  -661, -180 },</div><div class="line"><a name="l09039"></a><span class="lineno"> 9039</span>&#160;        { 0xC5DD44271AD3CDBA,  -635, -172 },</div><div class="line"><a name="l09040"></a><span class="lineno"> 9040</span>&#160;        { 0x936B9FCEBB25C996,  -608, -164 },</div><div class="line"><a name="l09041"></a><span class="lineno"> 9041</span>&#160;        { 0xDBAC6C247D62A584,  -582, -156 },</div><div class="line"><a name="l09042"></a><span class="lineno"> 9042</span>&#160;        { 0xA3AB66580D5FDAF6,  -555, -148 },</div><div class="line"><a name="l09043"></a><span class="lineno"> 9043</span>&#160;        { 0xF3E2F893DEC3F126,  -529, -140 },</div><div class="line"><a name="l09044"></a><span class="lineno"> 9044</span>&#160;        { 0xB5B5ADA8AAFF80B8,  -502, -132 },</div><div class="line"><a name="l09045"></a><span class="lineno"> 9045</span>&#160;        { 0x87625F056C7C4A8B,  -475, -124 },</div><div class="line"><a name="l09046"></a><span class="lineno"> 9046</span>&#160;        { 0xC9BCFF6034C13053,  -449, -116 },</div><div class="line"><a name="l09047"></a><span class="lineno"> 9047</span>&#160;        { 0x964E858C91BA2655,  -422, -108 },</div><div class="line"><a name="l09048"></a><span class="lineno"> 9048</span>&#160;        { 0xDFF9772470297EBD,  -396, -100 },</div><div class="line"><a name="l09049"></a><span class="lineno"> 9049</span>&#160;        { 0xA6DFBD9FB8E5B88F,  -369,  -92 },</div><div class="line"><a name="l09050"></a><span class="lineno"> 9050</span>&#160;        { 0xF8A95FCF88747D94,  -343,  -84 },</div><div class="line"><a name="l09051"></a><span class="lineno"> 9051</span>&#160;        { 0xB94470938FA89BCF,  -316,  -76 },</div><div class="line"><a name="l09052"></a><span class="lineno"> 9052</span>&#160;        { 0x8A08F0F8BF0F156B,  -289,  -68 },</div><div class="line"><a name="l09053"></a><span class="lineno"> 9053</span>&#160;        { 0xCDB02555653131B6,  -263,  -60 },</div><div class="line"><a name="l09054"></a><span class="lineno"> 9054</span>&#160;        { 0x993FE2C6D07B7FAC,  -236,  -52 },</div><div class="line"><a name="l09055"></a><span class="lineno"> 9055</span>&#160;        { 0xE45C10C42A2B3B06,  -210,  -44 },</div><div class="line"><a name="l09056"></a><span class="lineno"> 9056</span>&#160;        { 0xAA242499697392D3,  -183,  -36 },</div><div class="line"><a name="l09057"></a><span class="lineno"> 9057</span>&#160;        { 0xFD87B5F28300CA0E,  -157,  -28 },</div><div class="line"><a name="l09058"></a><span class="lineno"> 9058</span>&#160;        { 0xBCE5086492111AEB,  -130,  -20 },</div><div class="line"><a name="l09059"></a><span class="lineno"> 9059</span>&#160;        { 0x8CBCCC096F5088CC,  -103,  -12 },</div><div class="line"><a name="l09060"></a><span class="lineno"> 9060</span>&#160;        { 0xD1B71758E219652C,   -77,   -4 },</div><div class="line"><a name="l09061"></a><span class="lineno"> 9061</span>&#160;        { 0x9C40000000000000,   -50,    4 },</div><div class="line"><a name="l09062"></a><span class="lineno"> 9062</span>&#160;        { 0xE8D4A51000000000,   -24,   12 },</div><div class="line"><a name="l09063"></a><span class="lineno"> 9063</span>&#160;        { 0xAD78EBC5AC620000,     3,   20 },</div><div class="line"><a name="l09064"></a><span class="lineno"> 9064</span>&#160;        { 0x813F3978F8940984,    30,   28 },</div><div class="line"><a name="l09065"></a><span class="lineno"> 9065</span>&#160;        { 0xC097CE7BC90715B3,    56,   36 },</div><div class="line"><a name="l09066"></a><span class="lineno"> 9066</span>&#160;        { 0x8F7E32CE7BEA5C70,    83,   44 },</div><div class="line"><a name="l09067"></a><span class="lineno"> 9067</span>&#160;        { 0xD5D238A4ABE98068,   109,   52 },</div><div class="line"><a name="l09068"></a><span class="lineno"> 9068</span>&#160;        { 0x9F4F2726179A2245,   136,   60 },</div><div class="line"><a name="l09069"></a><span class="lineno"> 9069</span>&#160;        { 0xED63A231D4C4FB27,   162,   68 },</div><div class="line"><a name="l09070"></a><span class="lineno"> 9070</span>&#160;        { 0xB0DE65388CC8ADA8,   189,   76 },</div><div class="line"><a name="l09071"></a><span class="lineno"> 9071</span>&#160;        { 0x83C7088E1AAB65DB,   216,   84 },</div><div class="line"><a name="l09072"></a><span class="lineno"> 9072</span>&#160;        { 0xC45D1DF942711D9A,   242,   92 },</div><div class="line"><a name="l09073"></a><span class="lineno"> 9073</span>&#160;        { 0x924D692CA61BE758,   269,  100 },</div><div class="line"><a name="l09074"></a><span class="lineno"> 9074</span>&#160;        { 0xDA01EE641A708DEA,   295,  108 },</div><div class="line"><a name="l09075"></a><span class="lineno"> 9075</span>&#160;        { 0xA26DA3999AEF774A,   322,  116 },</div><div class="line"><a name="l09076"></a><span class="lineno"> 9076</span>&#160;        { 0xF209787BB47D6B85,   348,  124 },</div><div class="line"><a name="l09077"></a><span class="lineno"> 9077</span>&#160;        { 0xB454E4A179DD1877,   375,  132 },</div><div class="line"><a name="l09078"></a><span class="lineno"> 9078</span>&#160;        { 0x865B86925B9BC5C2,   402,  140 },</div><div class="line"><a name="l09079"></a><span class="lineno"> 9079</span>&#160;        { 0xC83553C5C8965D3D,   428,  148 },</div><div class="line"><a name="l09080"></a><span class="lineno"> 9080</span>&#160;        { 0x952AB45CFA97A0B3,   455,  156 },</div><div class="line"><a name="l09081"></a><span class="lineno"> 9081</span>&#160;        { 0xDE469FBD99A05FE3,   481,  164 },</div><div class="line"><a name="l09082"></a><span class="lineno"> 9082</span>&#160;        { 0xA59BC234DB398C25,   508,  172 },</div><div class="line"><a name="l09083"></a><span class="lineno"> 9083</span>&#160;        { 0xF6C69A72A3989F5C,   534,  180 },</div><div class="line"><a name="l09084"></a><span class="lineno"> 9084</span>&#160;        { 0xB7DCBF5354E9BECE,   561,  188 },</div><div class="line"><a name="l09085"></a><span class="lineno"> 9085</span>&#160;        { 0x88FCF317F22241E2,   588,  196 },</div><div class="line"><a name="l09086"></a><span class="lineno"> 9086</span>&#160;        { 0xCC20CE9BD35C78A5,   614,  204 },</div><div class="line"><a name="l09087"></a><span class="lineno"> 9087</span>&#160;        { 0x98165AF37B2153DF,   641,  212 },</div><div class="line"><a name="l09088"></a><span class="lineno"> 9088</span>&#160;        { 0xE2A0B5DC971F303A,   667,  220 },</div><div class="line"><a name="l09089"></a><span class="lineno"> 9089</span>&#160;        { 0xA8D9D1535CE3B396,   694,  228 },</div><div class="line"><a name="l09090"></a><span class="lineno"> 9090</span>&#160;        { 0xFB9B7CD9A4A7443C,   720,  236 },</div><div class="line"><a name="l09091"></a><span class="lineno"> 9091</span>&#160;        { 0xBB764C4CA7A44410,   747,  244 },</div><div class="line"><a name="l09092"></a><span class="lineno"> 9092</span>&#160;        { 0x8BAB8EEFB6409C1A,   774,  252 },</div><div class="line"><a name="l09093"></a><span class="lineno"> 9093</span>&#160;        { 0xD01FEF10A657842C,   800,  260 },</div><div class="line"><a name="l09094"></a><span class="lineno"> 9094</span>&#160;        { 0x9B10A4E5E9913129,   827,  268 },</div><div class="line"><a name="l09095"></a><span class="lineno"> 9095</span>&#160;        { 0xE7109BFBA19C0C9D,   853,  276 },</div><div class="line"><a name="l09096"></a><span class="lineno"> 9096</span>&#160;        { 0xAC2820D9623BF429,   880,  284 },</div><div class="line"><a name="l09097"></a><span class="lineno"> 9097</span>&#160;        { 0x80444B5E7AA7CF85,   907,  292 },</div><div class="line"><a name="l09098"></a><span class="lineno"> 9098</span>&#160;        { 0xBF21E44003ACDD2D,   933,  300 },</div><div class="line"><a name="l09099"></a><span class="lineno"> 9099</span>&#160;        { 0x8E679C2F5E44FF8F,   960,  308 },</div><div class="line"><a name="l09100"></a><span class="lineno"> 9100</span>&#160;        { 0xD433179D9C8CB841,   986,  316 },</div><div class="line"><a name="l09101"></a><span class="lineno"> 9101</span>&#160;        { 0x9E19DB92B4E31BA9,  1013,  324 },</div><div class="line"><a name="l09102"></a><span class="lineno"> 9102</span>&#160;    };</div><div class="line"><a name="l09103"></a><span class="lineno"> 9103</span>&#160;</div><div class="line"><a name="l09104"></a><span class="lineno"> 9104</span>&#160;    <span class="comment">// This computation gives exactly the same results for k as</span></div><div class="line"><a name="l09105"></a><span class="lineno"> 9105</span>&#160;    <span class="comment">//      k = ceil((kAlpha - e - 1) * 0.30102999566398114)</span></div><div class="line"><a name="l09106"></a><span class="lineno"> 9106</span>&#160;    <span class="comment">// for |e| &lt;= 1500, but doesn&#39;t require floating-point operations.</span></div><div class="line"><a name="l09107"></a><span class="lineno"> 9107</span>&#160;    <span class="comment">// NB: log_10(2) ~= 78913 / 2^18</span></div><div class="line"><a name="l09108"></a><span class="lineno"> 9108</span>&#160;    assert(e &gt;= -1500);</div><div class="line"><a name="l09109"></a><span class="lineno"> 9109</span>&#160;    assert(e &lt;=  1500);</div><div class="line"><a name="l09110"></a><span class="lineno"> 9110</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> f = <a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#ac1ea1316de0b4a219f707c76b1db1966">kAlpha</a> - e - 1;</div><div class="line"><a name="l09111"></a><span class="lineno"> 9111</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> k = (f * 78913) / (1 &lt;&lt; 18) + (f &gt; 0);</div><div class="line"><a name="l09112"></a><span class="lineno"> 9112</span>&#160;</div><div class="line"><a name="l09113"></a><span class="lineno"> 9113</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> index = (-kCachedPowersMinDecExp + k + (kCachedPowersDecStep - 1)) / kCachedPowersDecStep;</div><div class="line"><a name="l09114"></a><span class="lineno"> 9114</span>&#160;    assert(index &gt;= 0);</div><div class="line"><a name="l09115"></a><span class="lineno"> 9115</span>&#160;    assert(index &lt; kCachedPowersSize);</div><div class="line"><a name="l09116"></a><span class="lineno"> 9116</span>&#160;    static_cast&lt;void&gt;(kCachedPowersSize); <span class="comment">// Fix warning.</span></div><div class="line"><a name="l09117"></a><span class="lineno"> 9117</span>&#160;</div><div class="line"><a name="l09118"></a><span class="lineno"> 9118</span>&#160;    <span class="keyword">const</span> cached_power cached = kCachedPowers[index];</div><div class="line"><a name="l09119"></a><span class="lineno"> 9119</span>&#160;    assert(<a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#ac1ea1316de0b4a219f707c76b1db1966">kAlpha</a> &lt;= cached.e + e + 64);</div><div class="line"><a name="l09120"></a><span class="lineno"> 9120</span>&#160;    assert(<a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a4a750fcc38da1ce68b7e25ab3a230e20">kGamma</a> &gt;= cached.e + e + 64);</div><div class="line"><a name="l09121"></a><span class="lineno"> 9121</span>&#160;</div><div class="line"><a name="l09122"></a><span class="lineno"> 9122</span>&#160;    <span class="keywordflow">return</span> cached;</div><div class="line"><a name="l09123"></a><span class="lineno"> 9123</span>&#160;}</div><div class="ttc" id="namespacenlohmann_1_1detail_1_1dtoa__impl_html_ac1ea1316de0b4a219f707c76b1db1966"><div class="ttname"><a href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#ac1ea1316de0b4a219f707c76b1db1966">nlohmann::detail::dtoa_impl::kAlpha</a></div><div class="ttdeci">constexpr int kAlpha</div><div class="ttdef"><b>Definition:</b> <a href="jsonParser_8h_source.html#l08948">jsonParser.h:8948</a></div></div>
<div class="ttc" id="namespacenlohmann_1_1detail_1_1dtoa__impl_html_a4a750fcc38da1ce68b7e25ab3a230e20"><div class="ttname"><a href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a4a750fcc38da1ce68b7e25ab3a230e20">nlohmann::detail::dtoa_impl::kGamma</a></div><div class="ttdeci">constexpr int kGamma</div><div class="ttdef"><b>Definition:</b> <a href="jsonParser_8h_source.html#l08949">jsonParser.h:8949</a></div></div>
</div><!-- fragment -->
<p class="reference">Перекрестные ссылки <a class="el" href="jsonParser_8h_source.html#l08954">nlohmann::detail::dtoa_impl::cached_power::e</a>, <a class="el" href="jsonParser_8h_source.html#l08948">kAlpha</a> и <a class="el" href="jsonParser_8h_source.html#l08949">kGamma</a>.</p>

<p class="reference">Используется в <a class="el" href="jsonParser_8h_source.html#l09466">grisu2()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_adbf329a18c5cf854a3477327afd2200b_icgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_adbf329a18c5cf854a3477327afd2200b_icgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_adbf329a18c5cf854a3477327afd2200b_icgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_adbf329a18c5cf854a3477327afd2200b_icgraph">
<area shape="rect"  title=" " alt="" coords="628,31,799,87"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a05b681dcb8569b9784c6dccfadb01633" title=" " alt="" coords="429,39,580,80"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#aab7a9670a4f4704a5d0347ad7588576b" title=" " alt="" coords="231,5,381,47"/>
<area shape="rect"  href="namespacenlohmann_1_1detail.html#a6192f1eab05fbbc5c35edb8368c8fc57" title="generates a decimal representation of the floating&#45;point number value in [first, last)." alt="" coords="238,71,374,112"/>
<area shape="rect"  href="classnlohmann_1_1detail_1_1serializer.html#a24b0fe45dc774441237bde198a133d8a" title=" " alt="" coords="5,71,183,112"/>
</map>
</div>

</div>
</div>
<a id="a05b681dcb8569b9784c6dccfadb01633"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05b681dcb8569b9784c6dccfadb01633">&#9670;&nbsp;</a></span>grisu2() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void nlohmann::detail::dtoa_impl::grisu2 </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> &amp;&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> &amp;&#160;</td>
          <td class="paramname"><em>decimal_exponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a>&#160;</td>
          <td class="paramname"><em>m_minus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a>&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a>&#160;</td>
          <td class="paramname"><em>m_plus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>v = buf * 10^decimal_exponent len is the length of the buffer (number of decimal digits) The buffer must be large enough, i.e. &gt;= max_digits10. </p>

<p class="definition">См. определение в файле <a class="el" href="jsonParser_8h_source.html">jsonParser.h</a> строка <a class="el" href="jsonParser_8h_source.html#l09466">9466</a></p>
<div class="fragment"><div class="line"><a name="l09468"></a><span class="lineno"> 9468</span>&#160;{</div><div class="line"><a name="l09469"></a><span class="lineno"> 9469</span>&#160;    assert(m_plus.e == m_minus.e);</div><div class="line"><a name="l09470"></a><span class="lineno"> 9470</span>&#160;    assert(m_plus.e == v.e);</div><div class="line"><a name="l09471"></a><span class="lineno"> 9471</span>&#160;</div><div class="line"><a name="l09472"></a><span class="lineno"> 9472</span>&#160;    <span class="comment">//  --------(-----------------------+-----------------------)--------    (A)</span></div><div class="line"><a name="l09473"></a><span class="lineno"> 9473</span>&#160;    <span class="comment">//          m-                      v                       m+</span></div><div class="line"><a name="l09474"></a><span class="lineno"> 9474</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09475"></a><span class="lineno"> 9475</span>&#160;    <span class="comment">//  --------------------(-----------+-----------------------)--------    (B)</span></div><div class="line"><a name="l09476"></a><span class="lineno"> 9476</span>&#160;    <span class="comment">//                      m-          v                       m+</span></div><div class="line"><a name="l09477"></a><span class="lineno"> 9477</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09478"></a><span class="lineno"> 9478</span>&#160;    <span class="comment">// First scale v (and m- and m+) such that the exponent is in the range</span></div><div class="line"><a name="l09479"></a><span class="lineno"> 9479</span>&#160;    <span class="comment">// [alpha, gamma].</span></div><div class="line"><a name="l09480"></a><span class="lineno"> 9480</span>&#160;</div><div class="line"><a name="l09481"></a><span class="lineno"> 9481</span>&#160;    <span class="keyword">const</span> cached_power cached = <a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#adbf329a18c5cf854a3477327afd2200b">get_cached_power_for_binary_exponent</a>(m_plus.e);</div><div class="line"><a name="l09482"></a><span class="lineno"> 9482</span>&#160;</div><div class="line"><a name="l09483"></a><span class="lineno"> 9483</span>&#160;    <span class="keyword">const</span> diyfp c_minus_k(cached.f, cached.e); <span class="comment">// = c ~= 10^-k</span></div><div class="line"><a name="l09484"></a><span class="lineno"> 9484</span>&#160;</div><div class="line"><a name="l09485"></a><span class="lineno"> 9485</span>&#160;    <span class="comment">// The exponent of the products is = v.e + c_minus_k.e + q and is in the range [alpha,gamma]</span></div><div class="line"><a name="l09486"></a><span class="lineno"> 9486</span>&#160;    <span class="keyword">const</span> diyfp w       = diyfp::mul(v,       c_minus_k);</div><div class="line"><a name="l09487"></a><span class="lineno"> 9487</span>&#160;    <span class="keyword">const</span> diyfp w_minus = diyfp::mul(m_minus, c_minus_k);</div><div class="line"><a name="l09488"></a><span class="lineno"> 9488</span>&#160;    <span class="keyword">const</span> diyfp w_plus  = diyfp::mul(m_plus,  c_minus_k);</div><div class="line"><a name="l09489"></a><span class="lineno"> 9489</span>&#160;</div><div class="line"><a name="l09490"></a><span class="lineno"> 9490</span>&#160;    <span class="comment">//  ----(---+---)---------------(---+---)---------------(---+---)----</span></div><div class="line"><a name="l09491"></a><span class="lineno"> 9491</span>&#160;    <span class="comment">//          w-                      w                       w+</span></div><div class="line"><a name="l09492"></a><span class="lineno"> 9492</span>&#160;    <span class="comment">//          = c*m-                  = c*v                   = c*m+</span></div><div class="line"><a name="l09493"></a><span class="lineno"> 9493</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09494"></a><span class="lineno"> 9494</span>&#160;    <span class="comment">// diyfp::mul rounds its result and c_minus_k is approximated too. w, w- and</span></div><div class="line"><a name="l09495"></a><span class="lineno"> 9495</span>&#160;    <span class="comment">// w+ are now off by a small amount.</span></div><div class="line"><a name="l09496"></a><span class="lineno"> 9496</span>&#160;    <span class="comment">// In fact:</span></div><div class="line"><a name="l09497"></a><span class="lineno"> 9497</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09498"></a><span class="lineno"> 9498</span>&#160;    <span class="comment">//      w - v * 10^k &lt; 1 ulp</span></div><div class="line"><a name="l09499"></a><span class="lineno"> 9499</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09500"></a><span class="lineno"> 9500</span>&#160;    <span class="comment">// To account for this inaccuracy, add resp. subtract 1 ulp.</span></div><div class="line"><a name="l09501"></a><span class="lineno"> 9501</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09502"></a><span class="lineno"> 9502</span>&#160;    <span class="comment">//  --------+---[---------------(---+---)---------------]---+--------</span></div><div class="line"><a name="l09503"></a><span class="lineno"> 9503</span>&#160;    <span class="comment">//          w-  M-                  w                   M+  w+</span></div><div class="line"><a name="l09504"></a><span class="lineno"> 9504</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09505"></a><span class="lineno"> 9505</span>&#160;    <span class="comment">// Now any number in [M-, M+] (bounds included) will round to w when input,</span></div><div class="line"><a name="l09506"></a><span class="lineno"> 9506</span>&#160;    <span class="comment">// regardless of how the input rounding algorithm breaks ties.</span></div><div class="line"><a name="l09507"></a><span class="lineno"> 9507</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09508"></a><span class="lineno"> 9508</span>&#160;    <span class="comment">// And digit_gen generates the shortest possible such number in [M-, M+].</span></div><div class="line"><a name="l09509"></a><span class="lineno"> 9509</span>&#160;    <span class="comment">// Note that this does not mean that Grisu2 always generates the shortest</span></div><div class="line"><a name="l09510"></a><span class="lineno"> 9510</span>&#160;    <span class="comment">// possible number in the interval (m-, m+).</span></div><div class="line"><a name="l09511"></a><span class="lineno"> 9511</span>&#160;    <span class="keyword">const</span> diyfp M_minus(w_minus.f + 1, w_minus.e);</div><div class="line"><a name="l09512"></a><span class="lineno"> 9512</span>&#160;    <span class="keyword">const</span> diyfp M_plus (w_plus.f  - 1, w_plus.e );</div><div class="line"><a name="l09513"></a><span class="lineno"> 9513</span>&#160;</div><div class="line"><a name="l09514"></a><span class="lineno"> 9514</span>&#160;    decimal_exponent = -cached.k; <span class="comment">// = -(-k) = k</span></div><div class="line"><a name="l09515"></a><span class="lineno"> 9515</span>&#160;</div><div class="line"><a name="l09516"></a><span class="lineno"> 9516</span>&#160;    <a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9b899c72b0e1e3dd46d75c2b4e6bcdfb">grisu2_digit_gen</a>(buf, len, decimal_exponent, M_minus, w, M_plus);</div><div class="line"><a name="l09517"></a><span class="lineno"> 9517</span>&#160;}</div><div class="ttc" id="namespacenlohmann_1_1detail_1_1dtoa__impl_html_a9b899c72b0e1e3dd46d75c2b4e6bcdfb"><div class="ttname"><a href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9b899c72b0e1e3dd46d75c2b4e6bcdfb">nlohmann::detail::dtoa_impl::grisu2_digit_gen</a></div><div class="ttdeci">void grisu2_digit_gen(char *buffer, int &amp;length, int &amp;decimal_exponent, diyfp M_minus, diyfp w, diyfp M_plus)</div><div class="ttdef"><b>Definition:</b> <a href="jsonParser_8h_source.html#l09226">jsonParser.h:9226</a></div></div>
<div class="ttc" id="namespacenlohmann_1_1detail_1_1dtoa__impl_html_adbf329a18c5cf854a3477327afd2200b"><div class="ttname"><a href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#adbf329a18c5cf854a3477327afd2200b">nlohmann::detail::dtoa_impl::get_cached_power_for_binary_exponent</a></div><div class="ttdeci">cached_power get_cached_power_for_binary_exponent(int e)</div><div class="ttdef"><b>Definition:</b> <a href="jsonParser_8h_source.html#l08965">jsonParser.h:8965</a></div></div>
</div><!-- fragment -->
<p class="reference">Перекрестные ссылки <a class="el" href="jsonParser_8h_source.html#l08698">nlohmann::detail::dtoa_impl::diyfp::e</a>, <a class="el" href="jsonParser_8h_source.html#l08954">nlohmann::detail::dtoa_impl::cached_power::e</a>, <a class="el" href="jsonParser_8h_source.html#l08697">nlohmann::detail::dtoa_impl::diyfp::f</a>, <a class="el" href="jsonParser_8h_source.html#l08953">nlohmann::detail::dtoa_impl::cached_power::f</a>, <a class="el" href="jsonParser_8h_source.html#l08965">get_cached_power_for_binary_exponent()</a>, <a class="el" href="jsonParser_8h_source.html#l09226">grisu2_digit_gen()</a>, <a class="el" href="jsonParser_8h_source.html#l08955">nlohmann::detail::dtoa_impl::cached_power::k</a> и <a class="el" href="jsonParser_8h_source.html#l08719">nlohmann::detail::dtoa_impl::diyfp::mul()</a>.</p>

<p class="reference">Используется в <a class="el" href="jsonParser_8h_source.html#l09525">grisu2()</a> и <a class="el" href="jsonParser_8h_source.html#l09696">nlohmann::detail::to_chars()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633_cgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633_cgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633_cgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633_cgraph">
<area shape="rect"  title=" " alt="" coords="5,86,156,127"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#adbf329a18c5cf854a3477327afd2200b" title=" " alt="" coords="204,5,375,61"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9b899c72b0e1e3dd46d75c2b4e6bcdfb" title=" " alt="" coords="212,86,367,127"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#aa5f250d12ce89c81fdb08900c6a823e8" title="returns x * y" alt="" coords="214,166,365,207"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#aeb26771af54ad73598c1a0430d65d884" title="returns x &#45; y" alt="" coords="434,6,585,47"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a264df2b5a7e19b864859161f3501155e" title=" " alt="" coords="423,71,596,113"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9e66e6d0f072aa4fc0627bffc5b1cbd8" title=" " alt="" coords="434,137,585,178"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#a23d25b3ad4527270a6e3f2a0bcca11e6" title=" " alt="" coords="644,101,795,142"/>
</map>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633_icgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633_icgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633_icgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_a05b681dcb8569b9784c6dccfadb01633_icgraph">
<area shape="rect"  title=" " alt="" coords="429,39,580,80"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#aab7a9670a4f4704a5d0347ad7588576b" title=" " alt="" coords="231,5,381,47"/>
<area shape="rect"  href="namespacenlohmann_1_1detail.html#a6192f1eab05fbbc5c35edb8368c8fc57" title="generates a decimal representation of the floating&#45;point number value in [first, last)." alt="" coords="238,71,374,112"/>
<area shape="rect"  href="classnlohmann_1_1detail_1_1serializer.html#a24b0fe45dc774441237bde198a133d8a" title=" " alt="" coords="5,71,183,112"/>
</map>
</div>

</div>
</div>
<a id="aab7a9670a4f4704a5d0347ad7588576b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab7a9670a4f4704a5d0347ad7588576b">&#9670;&nbsp;</a></span>grisu2() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename FloatType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void nlohmann::detail::dtoa_impl::grisu2 </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> &amp;&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> &amp;&#160;</td>
          <td class="paramname"><em>decimal_exponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FloatType&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>v = buf * 10^decimal_exponent len is the length of the buffer (number of decimal digits) The buffer must be large enough, i.e. &gt;= max_digits10. </p>

<p class="definition">См. определение в файле <a class="el" href="jsonParser_8h_source.html">jsonParser.h</a> строка <a class="el" href="jsonParser_8h_source.html#l09525">9525</a></p>
<div class="fragment"><div class="line"><a name="l09526"></a><span class="lineno"> 9526</span>&#160;{</div><div class="line"><a name="l09527"></a><span class="lineno"> 9527</span>&#160;    static_assert(diyfp::kPrecision &gt;= std::numeric_limits&lt;FloatType&gt;::digits + 3,</div><div class="line"><a name="l09528"></a><span class="lineno"> 9528</span>&#160;                  <span class="stringliteral">&quot;internal error: not enough precision&quot;</span>);</div><div class="line"><a name="l09529"></a><span class="lineno"> 9529</span>&#160;</div><div class="line"><a name="l09530"></a><span class="lineno"> 9530</span>&#160;    assert(std::isfinite(value));</div><div class="line"><a name="l09531"></a><span class="lineno"> 9531</span>&#160;    assert(value &gt; 0);</div><div class="line"><a name="l09532"></a><span class="lineno"> 9532</span>&#160;</div><div class="line"><a name="l09533"></a><span class="lineno"> 9533</span>&#160;    <span class="comment">// If the neighbors (and boundaries) of &#39;value&#39; are always computed for double-precision</span></div><div class="line"><a name="l09534"></a><span class="lineno"> 9534</span>&#160;    <span class="comment">// numbers, all float&#39;s can be recovered using strtod (and strtof). However, the resulting</span></div><div class="line"><a name="l09535"></a><span class="lineno"> 9535</span>&#160;    <span class="comment">// decimal representations are not exactly &quot;short&quot;.</span></div><div class="line"><a name="l09536"></a><span class="lineno"> 9536</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09537"></a><span class="lineno"> 9537</span>&#160;    <span class="comment">// The documentation for &#39;std::to_chars&#39; (https://en.cppreference.com/w/cpp/utility/to_chars)</span></div><div class="line"><a name="l09538"></a><span class="lineno"> 9538</span>&#160;    <span class="comment">// says &quot;value is converted to a string as if by std::sprintf in the default (&quot;C&quot;) locale&quot;</span></div><div class="line"><a name="l09539"></a><span class="lineno"> 9539</span>&#160;    <span class="comment">// and since sprintf promotes float&#39;s to double&#39;s, I think this is exactly what &#39;std::to_chars&#39;</span></div><div class="line"><a name="l09540"></a><span class="lineno"> 9540</span>&#160;    <span class="comment">// does.</span></div><div class="line"><a name="l09541"></a><span class="lineno"> 9541</span>&#160;    <span class="comment">// On the other hand, the documentation for &#39;std::to_chars&#39; requires that &quot;parsing the</span></div><div class="line"><a name="l09542"></a><span class="lineno"> 9542</span>&#160;    <span class="comment">// representation using the corresponding std::from_chars function recovers value exactly&quot;. That</span></div><div class="line"><a name="l09543"></a><span class="lineno"> 9543</span>&#160;    <span class="comment">// indicates that single precision floating-point numbers should be recovered using</span></div><div class="line"><a name="l09544"></a><span class="lineno"> 9544</span>&#160;    <span class="comment">// &#39;std::strtof&#39;.</span></div><div class="line"><a name="l09545"></a><span class="lineno"> 9545</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09546"></a><span class="lineno"> 9546</span>&#160;    <span class="comment">// NB: If the neighbors are computed for single-precision numbers, there is a single float</span></div><div class="line"><a name="l09547"></a><span class="lineno"> 9547</span>&#160;    <span class="comment">//     (7.0385307e-26f) which can&#39;t be recovered using strtod. The resulting double precision</span></div><div class="line"><a name="l09548"></a><span class="lineno"> 9548</span>&#160;    <span class="comment">//     value is off by 1 ulp.</span></div><div class="line"><a name="l09549"></a><span class="lineno"> 9549</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l09550"></a><span class="lineno"> 9550</span>&#160;    <span class="keyword">const</span> boundaries w = <a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a22b6e37654ac93c6d0d9c06ec1bf5ded">compute_boundaries</a>(static_cast&lt;double&gt;(value));</div><div class="line"><a name="l09551"></a><span class="lineno"> 9551</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l09552"></a><span class="lineno"> 9552</span>&#160;    <span class="keyword">const</span> boundaries w = <a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a22b6e37654ac93c6d0d9c06ec1bf5ded">compute_boundaries</a>(value);</div><div class="line"><a name="l09553"></a><span class="lineno"> 9553</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09554"></a><span class="lineno"> 9554</span>&#160;</div><div class="line"><a name="l09555"></a><span class="lineno"> 9555</span>&#160;    <a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#aab7a9670a4f4704a5d0347ad7588576b">grisu2</a>(buf, len, decimal_exponent, w.minus, w.w, w.plus);</div><div class="line"><a name="l09556"></a><span class="lineno"> 9556</span>&#160;}</div><div class="ttc" id="namespacenlohmann_1_1detail_1_1dtoa__impl_html_a22b6e37654ac93c6d0d9c06ec1bf5ded"><div class="ttname"><a href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a22b6e37654ac93c6d0d9c06ec1bf5ded">nlohmann::detail::dtoa_impl::compute_boundaries</a></div><div class="ttdeci">boundaries compute_boundaries(FloatType value)</div><div class="ttdef"><b>Definition:</b> <a href="jsonParser_8h_source.html#l08826">jsonParser.h:8826</a></div></div>
<div class="ttc" id="namespacenlohmann_1_1detail_1_1dtoa__impl_html_aab7a9670a4f4704a5d0347ad7588576b"><div class="ttname"><a href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#aab7a9670a4f4704a5d0347ad7588576b">nlohmann::detail::dtoa_impl::grisu2</a></div><div class="ttdeci">void grisu2(char *buf, int &amp;len, int &amp;decimal_exponent, FloatType value)</div><div class="ttdef"><b>Definition:</b> <a href="jsonParser_8h_source.html#l09525">jsonParser.h:9525</a></div></div>
</div><!-- fragment -->
<p class="reference">Перекрестные ссылки <a class="el" href="jsonParser_8h_source.html#l08826">compute_boundaries()</a>, <a class="el" href="jsonParser_8h_source.html#l09466">grisu2()</a>, <a class="el" href="jsonParser_8h_source.html#l08695">nlohmann::detail::dtoa_impl::diyfp::kPrecision</a>, <a class="el" href="jsonParser_8h_source.html#l08815">nlohmann::detail::dtoa_impl::boundaries::minus</a>, <a class="el" href="jsonParser_8h_source.html#l08816">nlohmann::detail::dtoa_impl::boundaries::plus</a> и <a class="el" href="jsonParser_8h_source.html#l08814">nlohmann::detail::dtoa_impl::boundaries::w</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_aab7a9670a4f4704a5d0347ad7588576b_cgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_aab7a9670a4f4704a5d0347ad7588576b_cgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_aab7a9670a4f4704a5d0347ad7588576b_cgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_aab7a9670a4f4704a5d0347ad7588576b_cgraph">
<area shape="rect"  title=" " alt="" coords="5,133,156,175"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a22b6e37654ac93c6d0d9c06ec1bf5ded" title=" " alt="" coords="204,64,385,105"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a05b681dcb8569b9784c6dccfadb01633" title=" " alt="" coords="219,165,370,207"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#a2246b5b40c7c6992153ef174063d6aa6" title="normalize x such that the significand is &gt;= 2^(q&#45;1)" alt="" coords="442,5,595,47"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#a6b6665e467ebabe0c0f7418d3fe4b118" title="normalize x such that the result has the exponent E" alt="" coords="653,64,824,105"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#a23d25b3ad4527270a6e3f2a0bcca11e6" title=" " alt="" coords="873,129,1024,171"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#adbf329a18c5cf854a3477327afd2200b" title=" " alt="" coords="433,122,604,178"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9b899c72b0e1e3dd46d75c2b4e6bcdfb" title=" " alt="" coords="441,203,596,244"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#aa5f250d12ce89c81fdb08900c6a823e8" title="returns x * y" alt="" coords="443,293,594,335"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#aeb26771af54ad73598c1a0430d65d884" title="returns x &#45; y" alt="" coords="663,129,814,171"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a264df2b5a7e19b864859161f3501155e" title=" " alt="" coords="652,195,825,236"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9e66e6d0f072aa4fc0627bffc5b1cbd8" title=" " alt="" coords="663,260,814,301"/>
</map>
</div>

</div>
</div>
<a id="a9b899c72b0e1e3dd46d75c2b4e6bcdfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b899c72b0e1e3dd46d75c2b4e6bcdfb">&#9670;&nbsp;</a></span>grisu2_digit_gen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void nlohmann::detail::dtoa_impl::grisu2_digit_gen </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> &amp;&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> &amp;&#160;</td>
          <td class="paramname"><em>decimal_exponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a>&#160;</td>
          <td class="paramname"><em>M_minus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a>&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html">diyfp</a>&#160;</td>
          <td class="paramname"><em>M_plus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Generates V = buffer * 10^decimal_exponent, such that M- &lt;= V &lt;= M+. M- and M+ must be normalized and share the same exponent -60 &lt;= e &lt;= -32. </p>

<p class="definition">См. определение в файле <a class="el" href="jsonParser_8h_source.html">jsonParser.h</a> строка <a class="el" href="jsonParser_8h_source.html#l09226">9226</a></p>
<div class="fragment"><div class="line"><a name="l09228"></a><span class="lineno"> 9228</span>&#160;{</div><div class="line"><a name="l09229"></a><span class="lineno"> 9229</span>&#160;    static_assert(<a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#ac1ea1316de0b4a219f707c76b1db1966">kAlpha</a> &gt;= -60, <span class="stringliteral">&quot;internal error&quot;</span>);</div><div class="line"><a name="l09230"></a><span class="lineno"> 9230</span>&#160;    static_assert(<a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a4a750fcc38da1ce68b7e25ab3a230e20">kGamma</a> &lt;= -32, <span class="stringliteral">&quot;internal error&quot;</span>);</div><div class="line"><a name="l09231"></a><span class="lineno"> 9231</span>&#160;</div><div class="line"><a name="l09232"></a><span class="lineno"> 9232</span>&#160;    <span class="comment">// Generates the digits (and the exponent) of a decimal floating-point</span></div><div class="line"><a name="l09233"></a><span class="lineno"> 9233</span>&#160;    <span class="comment">// number V = buffer * 10^decimal_exponent in the range [M-, M+]. The diyfp&#39;s</span></div><div class="line"><a name="l09234"></a><span class="lineno"> 9234</span>&#160;    <span class="comment">// w, M- and M+ share the same exponent e, which satisfies alpha &lt;= e &lt;= gamma.</span></div><div class="line"><a name="l09235"></a><span class="lineno"> 9235</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09236"></a><span class="lineno"> 9236</span>&#160;    <span class="comment">//               &lt;--------------------------- delta ----&gt;</span></div><div class="line"><a name="l09237"></a><span class="lineno"> 9237</span>&#160;    <span class="comment">//                                  &lt;---- dist ---------&gt;</span></div><div class="line"><a name="l09238"></a><span class="lineno"> 9238</span>&#160;    <span class="comment">// --------------[------------------+-------------------]--------------</span></div><div class="line"><a name="l09239"></a><span class="lineno"> 9239</span>&#160;    <span class="comment">//               M-                 w                   M+</span></div><div class="line"><a name="l09240"></a><span class="lineno"> 9240</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09241"></a><span class="lineno"> 9241</span>&#160;    <span class="comment">// Grisu2 generates the digits of M+ from left to right and stops as soon as</span></div><div class="line"><a name="l09242"></a><span class="lineno"> 9242</span>&#160;    <span class="comment">// V is in [M-,M+].</span></div><div class="line"><a name="l09243"></a><span class="lineno"> 9243</span>&#160;</div><div class="line"><a name="l09244"></a><span class="lineno"> 9244</span>&#160;    assert(M_plus.e &gt;= <a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#ac1ea1316de0b4a219f707c76b1db1966">kAlpha</a>);</div><div class="line"><a name="l09245"></a><span class="lineno"> 9245</span>&#160;    assert(M_plus.e &lt;= <a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a4a750fcc38da1ce68b7e25ab3a230e20">kGamma</a>);</div><div class="line"><a name="l09246"></a><span class="lineno"> 9246</span>&#160;</div><div class="line"><a name="l09247"></a><span class="lineno"> 9247</span>&#160;    uint64_t delta = diyfp::sub(M_plus, M_minus).f; <span class="comment">// (significand of (M+ - M-), implicit exponent is e)</span></div><div class="line"><a name="l09248"></a><span class="lineno"> 9248</span>&#160;    uint64_t dist  = diyfp::sub(M_plus, w      ).f; <span class="comment">// (significand of (M+ - w ), implicit exponent is e)</span></div><div class="line"><a name="l09249"></a><span class="lineno"> 9249</span>&#160;</div><div class="line"><a name="l09250"></a><span class="lineno"> 9250</span>&#160;    <span class="comment">// Split M+ = f * 2^e into two parts p1 and p2 (note: e &lt; 0):</span></div><div class="line"><a name="l09251"></a><span class="lineno"> 9251</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09252"></a><span class="lineno"> 9252</span>&#160;    <span class="comment">//      M+ = f * 2^e</span></div><div class="line"><a name="l09253"></a><span class="lineno"> 9253</span>&#160;    <span class="comment">//         = ((f div 2^-e) * 2^-e + (f mod 2^-e)) * 2^e</span></div><div class="line"><a name="l09254"></a><span class="lineno"> 9254</span>&#160;    <span class="comment">//         = ((p1        ) * 2^-e + (p2        )) * 2^e</span></div><div class="line"><a name="l09255"></a><span class="lineno"> 9255</span>&#160;    <span class="comment">//         = p1 + p2 * 2^e</span></div><div class="line"><a name="l09256"></a><span class="lineno"> 9256</span>&#160;</div><div class="line"><a name="l09257"></a><span class="lineno"> 9257</span>&#160;    <span class="keyword">const</span> diyfp one(uint64_t{1} &lt;&lt; -M_plus.e, M_plus.e);</div><div class="line"><a name="l09258"></a><span class="lineno"> 9258</span>&#160;</div><div class="line"><a name="l09259"></a><span class="lineno"> 9259</span>&#160;    uint32_t p1 = static_cast&lt;uint32_t&gt;(M_plus.f &gt;&gt; -one.e); <span class="comment">// p1 = f div 2^-e (Since -e &gt;= 32, p1 fits into a 32-bit int.)</span></div><div class="line"><a name="l09260"></a><span class="lineno"> 9260</span>&#160;    uint64_t p2 = M_plus.f &amp; (one.f - 1);                    <span class="comment">// p2 = f mod 2^-e</span></div><div class="line"><a name="l09261"></a><span class="lineno"> 9261</span>&#160;</div><div class="line"><a name="l09262"></a><span class="lineno"> 9262</span>&#160;    <span class="comment">// 1)</span></div><div class="line"><a name="l09263"></a><span class="lineno"> 9263</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09264"></a><span class="lineno"> 9264</span>&#160;    <span class="comment">// Generate the digits of the integral part p1 = d[n-1]...d[1]d[0]</span></div><div class="line"><a name="l09265"></a><span class="lineno"> 9265</span>&#160;</div><div class="line"><a name="l09266"></a><span class="lineno"> 9266</span>&#160;    assert(p1 &gt; 0);</div><div class="line"><a name="l09267"></a><span class="lineno"> 9267</span>&#160;</div><div class="line"><a name="l09268"></a><span class="lineno"> 9268</span>&#160;    uint32_t pow10;</div><div class="line"><a name="l09269"></a><span class="lineno"> 9269</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> k = <a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a264df2b5a7e19b864859161f3501155e">find_largest_pow10</a>(p1, pow10);</div><div class="line"><a name="l09270"></a><span class="lineno"> 9270</span>&#160;</div><div class="line"><a name="l09271"></a><span class="lineno"> 9271</span>&#160;    <span class="comment">//      10^(k-1) &lt;= p1 &lt; 10^k, pow10 = 10^(k-1)</span></div><div class="line"><a name="l09272"></a><span class="lineno"> 9272</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09273"></a><span class="lineno"> 9273</span>&#160;    <span class="comment">//      p1 = (p1 div 10^(k-1)) * 10^(k-1) + (p1 mod 10^(k-1))</span></div><div class="line"><a name="l09274"></a><span class="lineno"> 9274</span>&#160;    <span class="comment">//         = (d[k-1]         ) * 10^(k-1) + (p1 mod 10^(k-1))</span></div><div class="line"><a name="l09275"></a><span class="lineno"> 9275</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09276"></a><span class="lineno"> 9276</span>&#160;    <span class="comment">//      M+ = p1                                             + p2 * 2^e</span></div><div class="line"><a name="l09277"></a><span class="lineno"> 9277</span>&#160;    <span class="comment">//         = d[k-1] * 10^(k-1) + (p1 mod 10^(k-1))          + p2 * 2^e</span></div><div class="line"><a name="l09278"></a><span class="lineno"> 9278</span>&#160;    <span class="comment">//         = d[k-1] * 10^(k-1) + ((p1 mod 10^(k-1)) * 2^-e + p2) * 2^e</span></div><div class="line"><a name="l09279"></a><span class="lineno"> 9279</span>&#160;    <span class="comment">//         = d[k-1] * 10^(k-1) + (                         rest) * 2^e</span></div><div class="line"><a name="l09280"></a><span class="lineno"> 9280</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09281"></a><span class="lineno"> 9281</span>&#160;    <span class="comment">// Now generate the digits d[n] of p1 from left to right (n = k-1,...,0)</span></div><div class="line"><a name="l09282"></a><span class="lineno"> 9282</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09283"></a><span class="lineno"> 9283</span>&#160;    <span class="comment">//      p1 = d[k-1]...d[n] * 10^n + d[n-1]...d[0]</span></div><div class="line"><a name="l09284"></a><span class="lineno"> 9284</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09285"></a><span class="lineno"> 9285</span>&#160;    <span class="comment">// but stop as soon as</span></div><div class="line"><a name="l09286"></a><span class="lineno"> 9286</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09287"></a><span class="lineno"> 9287</span>&#160;    <span class="comment">//      rest * 2^e = (d[n-1]...d[0] * 2^-e + p2) * 2^e &lt;= delta * 2^e</span></div><div class="line"><a name="l09288"></a><span class="lineno"> 9288</span>&#160;</div><div class="line"><a name="l09289"></a><span class="lineno"> 9289</span>&#160;    <span class="keywordtype">int</span> n = k;</div><div class="line"><a name="l09290"></a><span class="lineno"> 9290</span>&#160;    <span class="keywordflow">while</span> (n &gt; 0)</div><div class="line"><a name="l09291"></a><span class="lineno"> 9291</span>&#160;    {</div><div class="line"><a name="l09292"></a><span class="lineno"> 9292</span>&#160;        <span class="comment">// Invariants:</span></div><div class="line"><a name="l09293"></a><span class="lineno"> 9293</span>&#160;        <span class="comment">//      M+ = buffer * 10^n + (p1 + p2 * 2^e)    (buffer = 0 for n = k)</span></div><div class="line"><a name="l09294"></a><span class="lineno"> 9294</span>&#160;        <span class="comment">//      pow10 = 10^(n-1) &lt;= p1 &lt; 10^n</span></div><div class="line"><a name="l09295"></a><span class="lineno"> 9295</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09296"></a><span class="lineno"> 9296</span>&#160;        <span class="keyword">const</span> uint32_t d = p1 / pow10;  <span class="comment">// d = p1 div 10^(n-1)</span></div><div class="line"><a name="l09297"></a><span class="lineno"> 9297</span>&#160;        <span class="keyword">const</span> uint32_t r = p1 % pow10;  <span class="comment">// r = p1 mod 10^(n-1)</span></div><div class="line"><a name="l09298"></a><span class="lineno"> 9298</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09299"></a><span class="lineno"> 9299</span>&#160;        <span class="comment">//      M+ = buffer * 10^n + (d * 10^(n-1) + r) + p2 * 2^e</span></div><div class="line"><a name="l09300"></a><span class="lineno"> 9300</span>&#160;        <span class="comment">//         = (buffer * 10 + d) * 10^(n-1) + (r + p2 * 2^e)</span></div><div class="line"><a name="l09301"></a><span class="lineno"> 9301</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09302"></a><span class="lineno"> 9302</span>&#160;        assert(d &lt;= 9);</div><div class="line"><a name="l09303"></a><span class="lineno"> 9303</span>&#160;        buffer[length++] = static_cast&lt;char&gt;(<span class="charliteral">&#39;0&#39;</span> + d); <span class="comment">// buffer := buffer * 10 + d</span></div><div class="line"><a name="l09304"></a><span class="lineno"> 9304</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09305"></a><span class="lineno"> 9305</span>&#160;        <span class="comment">//      M+ = buffer * 10^(n-1) + (r + p2 * 2^e)</span></div><div class="line"><a name="l09306"></a><span class="lineno"> 9306</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09307"></a><span class="lineno"> 9307</span>&#160;        p1 = r;</div><div class="line"><a name="l09308"></a><span class="lineno"> 9308</span>&#160;        n--;</div><div class="line"><a name="l09309"></a><span class="lineno"> 9309</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09310"></a><span class="lineno"> 9310</span>&#160;        <span class="comment">//      M+ = buffer * 10^n + (p1 + p2 * 2^e)</span></div><div class="line"><a name="l09311"></a><span class="lineno"> 9311</span>&#160;        <span class="comment">//      pow10 = 10^n</span></div><div class="line"><a name="l09312"></a><span class="lineno"> 9312</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09313"></a><span class="lineno"> 9313</span>&#160;</div><div class="line"><a name="l09314"></a><span class="lineno"> 9314</span>&#160;        <span class="comment">// Now check if enough digits have been generated.</span></div><div class="line"><a name="l09315"></a><span class="lineno"> 9315</span>&#160;        <span class="comment">// Compute</span></div><div class="line"><a name="l09316"></a><span class="lineno"> 9316</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09317"></a><span class="lineno"> 9317</span>&#160;        <span class="comment">//      p1 + p2 * 2^e = (p1 * 2^-e + p2) * 2^e = rest * 2^e</span></div><div class="line"><a name="l09318"></a><span class="lineno"> 9318</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09319"></a><span class="lineno"> 9319</span>&#160;        <span class="comment">// Note:</span></div><div class="line"><a name="l09320"></a><span class="lineno"> 9320</span>&#160;        <span class="comment">// Since rest and delta share the same exponent e, it suffices to</span></div><div class="line"><a name="l09321"></a><span class="lineno"> 9321</span>&#160;        <span class="comment">// compare the significands.</span></div><div class="line"><a name="l09322"></a><span class="lineno"> 9322</span>&#160;        <span class="keyword">const</span> uint64_t rest = (uint64_t{p1} &lt;&lt; -one.e) + p2;</div><div class="line"><a name="l09323"></a><span class="lineno"> 9323</span>&#160;        <span class="keywordflow">if</span> (rest &lt;= delta)</div><div class="line"><a name="l09324"></a><span class="lineno"> 9324</span>&#160;        {</div><div class="line"><a name="l09325"></a><span class="lineno"> 9325</span>&#160;            <span class="comment">// V = buffer * 10^n, with M- &lt;= V &lt;= M+.</span></div><div class="line"><a name="l09326"></a><span class="lineno"> 9326</span>&#160;</div><div class="line"><a name="l09327"></a><span class="lineno"> 9327</span>&#160;            decimal_exponent += n;</div><div class="line"><a name="l09328"></a><span class="lineno"> 9328</span>&#160;</div><div class="line"><a name="l09329"></a><span class="lineno"> 9329</span>&#160;            <span class="comment">// We may now just stop. But instead look if the buffer could be</span></div><div class="line"><a name="l09330"></a><span class="lineno"> 9330</span>&#160;            <span class="comment">// decremented to bring V closer to w.</span></div><div class="line"><a name="l09331"></a><span class="lineno"> 9331</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l09332"></a><span class="lineno"> 9332</span>&#160;            <span class="comment">// pow10 = 10^n is now 1 ulp in the decimal representation V.</span></div><div class="line"><a name="l09333"></a><span class="lineno"> 9333</span>&#160;            <span class="comment">// The rounding procedure works with diyfp&#39;s with an implicit</span></div><div class="line"><a name="l09334"></a><span class="lineno"> 9334</span>&#160;            <span class="comment">// exponent of e.</span></div><div class="line"><a name="l09335"></a><span class="lineno"> 9335</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l09336"></a><span class="lineno"> 9336</span>&#160;            <span class="comment">//      10^n = (10^n * 2^-e) * 2^e = ulp * 2^e</span></div><div class="line"><a name="l09337"></a><span class="lineno"> 9337</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l09338"></a><span class="lineno"> 9338</span>&#160;            <span class="keyword">const</span> uint64_t ten_n = uint64_t{pow10} &lt;&lt; -one.e;</div><div class="line"><a name="l09339"></a><span class="lineno"> 9339</span>&#160;            <a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9e66e6d0f072aa4fc0627bffc5b1cbd8">grisu2_round</a>(buffer, length, dist, delta, rest, ten_n);</div><div class="line"><a name="l09340"></a><span class="lineno"> 9340</span>&#160;</div><div class="line"><a name="l09341"></a><span class="lineno"> 9341</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l09342"></a><span class="lineno"> 9342</span>&#160;        }</div><div class="line"><a name="l09343"></a><span class="lineno"> 9343</span>&#160;</div><div class="line"><a name="l09344"></a><span class="lineno"> 9344</span>&#160;        pow10 /= 10;</div><div class="line"><a name="l09345"></a><span class="lineno"> 9345</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09346"></a><span class="lineno"> 9346</span>&#160;        <span class="comment">//      pow10 = 10^(n-1) &lt;= p1 &lt; 10^n</span></div><div class="line"><a name="l09347"></a><span class="lineno"> 9347</span>&#160;        <span class="comment">// Invariants restored.</span></div><div class="line"><a name="l09348"></a><span class="lineno"> 9348</span>&#160;    }</div><div class="line"><a name="l09349"></a><span class="lineno"> 9349</span>&#160;</div><div class="line"><a name="l09350"></a><span class="lineno"> 9350</span>&#160;    <span class="comment">// 2)</span></div><div class="line"><a name="l09351"></a><span class="lineno"> 9351</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09352"></a><span class="lineno"> 9352</span>&#160;    <span class="comment">// The digits of the integral part have been generated:</span></div><div class="line"><a name="l09353"></a><span class="lineno"> 9353</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09354"></a><span class="lineno"> 9354</span>&#160;    <span class="comment">//      M+ = d[k-1]...d[1]d[0] + p2 * 2^e</span></div><div class="line"><a name="l09355"></a><span class="lineno"> 9355</span>&#160;    <span class="comment">//         = buffer            + p2 * 2^e</span></div><div class="line"><a name="l09356"></a><span class="lineno"> 9356</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09357"></a><span class="lineno"> 9357</span>&#160;    <span class="comment">// Now generate the digits of the fractional part p2 * 2^e.</span></div><div class="line"><a name="l09358"></a><span class="lineno"> 9358</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09359"></a><span class="lineno"> 9359</span>&#160;    <span class="comment">// Note:</span></div><div class="line"><a name="l09360"></a><span class="lineno"> 9360</span>&#160;    <span class="comment">// No decimal point is generated: the exponent is adjusted instead.</span></div><div class="line"><a name="l09361"></a><span class="lineno"> 9361</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09362"></a><span class="lineno"> 9362</span>&#160;    <span class="comment">// p2 actually represents the fraction</span></div><div class="line"><a name="l09363"></a><span class="lineno"> 9363</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09364"></a><span class="lineno"> 9364</span>&#160;    <span class="comment">//      p2 * 2^e</span></div><div class="line"><a name="l09365"></a><span class="lineno"> 9365</span>&#160;    <span class="comment">//          = p2 / 2^-e</span></div><div class="line"><a name="l09366"></a><span class="lineno"> 9366</span>&#160;    <span class="comment">//          = d[-1] / 10^1 + d[-2] / 10^2 + ...</span></div><div class="line"><a name="l09367"></a><span class="lineno"> 9367</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09368"></a><span class="lineno"> 9368</span>&#160;    <span class="comment">// Now generate the digits d[-m] of p1 from left to right (m = 1,2,...)</span></div><div class="line"><a name="l09369"></a><span class="lineno"> 9369</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09370"></a><span class="lineno"> 9370</span>&#160;    <span class="comment">//      p2 * 2^e = d[-1]d[-2]...d[-m] * 10^-m</span></div><div class="line"><a name="l09371"></a><span class="lineno"> 9371</span>&#160;    <span class="comment">//                      + 10^-m * (d[-m-1] / 10^1 + d[-m-2] / 10^2 + ...)</span></div><div class="line"><a name="l09372"></a><span class="lineno"> 9372</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09373"></a><span class="lineno"> 9373</span>&#160;    <span class="comment">// using</span></div><div class="line"><a name="l09374"></a><span class="lineno"> 9374</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09375"></a><span class="lineno"> 9375</span>&#160;    <span class="comment">//      10^m * p2 = ((10^m * p2) div 2^-e) * 2^-e + ((10^m * p2) mod 2^-e)</span></div><div class="line"><a name="l09376"></a><span class="lineno"> 9376</span>&#160;    <span class="comment">//                = (                   d) * 2^-e + (                   r)</span></div><div class="line"><a name="l09377"></a><span class="lineno"> 9377</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09378"></a><span class="lineno"> 9378</span>&#160;    <span class="comment">// or</span></div><div class="line"><a name="l09379"></a><span class="lineno"> 9379</span>&#160;    <span class="comment">//      10^m * p2 * 2^e = d + r * 2^e</span></div><div class="line"><a name="l09380"></a><span class="lineno"> 9380</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09381"></a><span class="lineno"> 9381</span>&#160;    <span class="comment">// i.e.</span></div><div class="line"><a name="l09382"></a><span class="lineno"> 9382</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09383"></a><span class="lineno"> 9383</span>&#160;    <span class="comment">//      M+ = buffer + p2 * 2^e</span></div><div class="line"><a name="l09384"></a><span class="lineno"> 9384</span>&#160;    <span class="comment">//         = buffer + 10^-m * (d + r * 2^e)</span></div><div class="line"><a name="l09385"></a><span class="lineno"> 9385</span>&#160;    <span class="comment">//         = (buffer * 10^m + d) * 10^-m + 10^-m * r * 2^e</span></div><div class="line"><a name="l09386"></a><span class="lineno"> 9386</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09387"></a><span class="lineno"> 9387</span>&#160;    <span class="comment">// and stop as soon as 10^-m * r * 2^e &lt;= delta * 2^e</span></div><div class="line"><a name="l09388"></a><span class="lineno"> 9388</span>&#160;</div><div class="line"><a name="l09389"></a><span class="lineno"> 9389</span>&#160;    assert(p2 &gt; delta);</div><div class="line"><a name="l09390"></a><span class="lineno"> 9390</span>&#160;</div><div class="line"><a name="l09391"></a><span class="lineno"> 9391</span>&#160;    <span class="keywordtype">int</span> m = 0;</div><div class="line"><a name="l09392"></a><span class="lineno"> 9392</span>&#160;    <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l09393"></a><span class="lineno"> 9393</span>&#160;    {</div><div class="line"><a name="l09394"></a><span class="lineno"> 9394</span>&#160;        <span class="comment">// Invariant:</span></div><div class="line"><a name="l09395"></a><span class="lineno"> 9395</span>&#160;        <span class="comment">//      M+ = buffer * 10^-m + 10^-m * (d[-m-1] / 10 + d[-m-2] / 10^2 + ...) * 2^e</span></div><div class="line"><a name="l09396"></a><span class="lineno"> 9396</span>&#160;        <span class="comment">//         = buffer * 10^-m + 10^-m * (p2                                 ) * 2^e</span></div><div class="line"><a name="l09397"></a><span class="lineno"> 9397</span>&#160;        <span class="comment">//         = buffer * 10^-m + 10^-m * (1/10 * (10 * p2)                   ) * 2^e</span></div><div class="line"><a name="l09398"></a><span class="lineno"> 9398</span>&#160;        <span class="comment">//         = buffer * 10^-m + 10^-m * (1/10 * ((10*p2 div 2^-e) * 2^-e + (10*p2 mod 2^-e)) * 2^e</span></div><div class="line"><a name="l09399"></a><span class="lineno"> 9399</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09400"></a><span class="lineno"> 9400</span>&#160;        assert(p2 &lt;= UINT64_MAX / 10);</div><div class="line"><a name="l09401"></a><span class="lineno"> 9401</span>&#160;        p2 *= 10;</div><div class="line"><a name="l09402"></a><span class="lineno"> 9402</span>&#160;        <span class="keyword">const</span> uint64_t d = p2 &gt;&gt; -one.e;     <span class="comment">// d = (10 * p2) div 2^-e</span></div><div class="line"><a name="l09403"></a><span class="lineno"> 9403</span>&#160;        <span class="keyword">const</span> uint64_t r = p2 &amp; (one.f - 1); <span class="comment">// r = (10 * p2) mod 2^-e</span></div><div class="line"><a name="l09404"></a><span class="lineno"> 9404</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09405"></a><span class="lineno"> 9405</span>&#160;        <span class="comment">//      M+ = buffer * 10^-m + 10^-m * (1/10 * (d * 2^-e + r) * 2^e</span></div><div class="line"><a name="l09406"></a><span class="lineno"> 9406</span>&#160;        <span class="comment">//         = buffer * 10^-m + 10^-m * (1/10 * (d + r * 2^e))</span></div><div class="line"><a name="l09407"></a><span class="lineno"> 9407</span>&#160;        <span class="comment">//         = (buffer * 10 + d) * 10^(-m-1) + 10^(-m-1) * r * 2^e</span></div><div class="line"><a name="l09408"></a><span class="lineno"> 9408</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09409"></a><span class="lineno"> 9409</span>&#160;        assert(d &lt;= 9);</div><div class="line"><a name="l09410"></a><span class="lineno"> 9410</span>&#160;        buffer[length++] = static_cast&lt;char&gt;(<span class="charliteral">&#39;0&#39;</span> + d); <span class="comment">// buffer := buffer * 10 + d</span></div><div class="line"><a name="l09411"></a><span class="lineno"> 9411</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09412"></a><span class="lineno"> 9412</span>&#160;        <span class="comment">//      M+ = buffer * 10^(-m-1) + 10^(-m-1) * r * 2^e</span></div><div class="line"><a name="l09413"></a><span class="lineno"> 9413</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09414"></a><span class="lineno"> 9414</span>&#160;        p2 = r;</div><div class="line"><a name="l09415"></a><span class="lineno"> 9415</span>&#160;        m++;</div><div class="line"><a name="l09416"></a><span class="lineno"> 9416</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09417"></a><span class="lineno"> 9417</span>&#160;        <span class="comment">//      M+ = buffer * 10^-m + 10^-m * p2 * 2^e</span></div><div class="line"><a name="l09418"></a><span class="lineno"> 9418</span>&#160;        <span class="comment">// Invariant restored.</span></div><div class="line"><a name="l09419"></a><span class="lineno"> 9419</span>&#160;</div><div class="line"><a name="l09420"></a><span class="lineno"> 9420</span>&#160;        <span class="comment">// Check if enough digits have been generated.</span></div><div class="line"><a name="l09421"></a><span class="lineno"> 9421</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l09422"></a><span class="lineno"> 9422</span>&#160;        <span class="comment">//      10^-m * p2 * 2^e &lt;= delta * 2^e</span></div><div class="line"><a name="l09423"></a><span class="lineno"> 9423</span>&#160;        <span class="comment">//              p2 * 2^e &lt;= 10^m * delta * 2^e</span></div><div class="line"><a name="l09424"></a><span class="lineno"> 9424</span>&#160;        <span class="comment">//                    p2 &lt;= 10^m * delta</span></div><div class="line"><a name="l09425"></a><span class="lineno"> 9425</span>&#160;        delta *= 10;</div><div class="line"><a name="l09426"></a><span class="lineno"> 9426</span>&#160;        dist  *= 10;</div><div class="line"><a name="l09427"></a><span class="lineno"> 9427</span>&#160;        <span class="keywordflow">if</span> (p2 &lt;= delta)</div><div class="line"><a name="l09428"></a><span class="lineno"> 9428</span>&#160;        {</div><div class="line"><a name="l09429"></a><span class="lineno"> 9429</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09430"></a><span class="lineno"> 9430</span>&#160;        }</div><div class="line"><a name="l09431"></a><span class="lineno"> 9431</span>&#160;    }</div><div class="line"><a name="l09432"></a><span class="lineno"> 9432</span>&#160;</div><div class="line"><a name="l09433"></a><span class="lineno"> 9433</span>&#160;    <span class="comment">// V = buffer * 10^-m, with M- &lt;= V &lt;= M+.</span></div><div class="line"><a name="l09434"></a><span class="lineno"> 9434</span>&#160;</div><div class="line"><a name="l09435"></a><span class="lineno"> 9435</span>&#160;    decimal_exponent -= m;</div><div class="line"><a name="l09436"></a><span class="lineno"> 9436</span>&#160;</div><div class="line"><a name="l09437"></a><span class="lineno"> 9437</span>&#160;    <span class="comment">// 1 ulp in the decimal representation is now 10^-m.</span></div><div class="line"><a name="l09438"></a><span class="lineno"> 9438</span>&#160;    <span class="comment">// Since delta and dist are now scaled by 10^m, we need to do the</span></div><div class="line"><a name="l09439"></a><span class="lineno"> 9439</span>&#160;    <span class="comment">// same with ulp in order to keep the units in sync.</span></div><div class="line"><a name="l09440"></a><span class="lineno"> 9440</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09441"></a><span class="lineno"> 9441</span>&#160;    <span class="comment">//      10^m * 10^-m = 1 = 2^-e * 2^e = ten_m * 2^e</span></div><div class="line"><a name="l09442"></a><span class="lineno"> 9442</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09443"></a><span class="lineno"> 9443</span>&#160;    <span class="keyword">const</span> uint64_t ten_m = one.f;</div><div class="line"><a name="l09444"></a><span class="lineno"> 9444</span>&#160;    <a class="code" href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9e66e6d0f072aa4fc0627bffc5b1cbd8">grisu2_round</a>(buffer, length, dist, delta, p2, ten_m);</div><div class="line"><a name="l09445"></a><span class="lineno"> 9445</span>&#160;</div><div class="line"><a name="l09446"></a><span class="lineno"> 9446</span>&#160;    <span class="comment">// By construction this algorithm generates the shortest possible decimal</span></div><div class="line"><a name="l09447"></a><span class="lineno"> 9447</span>&#160;    <span class="comment">// number (Loitsch, Theorem 6.2) which rounds back to w.</span></div><div class="line"><a name="l09448"></a><span class="lineno"> 9448</span>&#160;    <span class="comment">// For an input number of precision p, at least</span></div><div class="line"><a name="l09449"></a><span class="lineno"> 9449</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09450"></a><span class="lineno"> 9450</span>&#160;    <span class="comment">//      N = 1 + ceil(p * log_10(2))</span></div><div class="line"><a name="l09451"></a><span class="lineno"> 9451</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09452"></a><span class="lineno"> 9452</span>&#160;    <span class="comment">// decimal digits are sufficient to identify all binary floating-point</span></div><div class="line"><a name="l09453"></a><span class="lineno"> 9453</span>&#160;    <span class="comment">// numbers (Matula, &quot;In-and-Out conversions&quot;).</span></div><div class="line"><a name="l09454"></a><span class="lineno"> 9454</span>&#160;    <span class="comment">// This implies that the algorithm does not produce more than N decimal</span></div><div class="line"><a name="l09455"></a><span class="lineno"> 9455</span>&#160;    <span class="comment">// digits.</span></div><div class="line"><a name="l09456"></a><span class="lineno"> 9456</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09457"></a><span class="lineno"> 9457</span>&#160;    <span class="comment">//      N = 17 for p = 53 (IEEE double precision)</span></div><div class="line"><a name="l09458"></a><span class="lineno"> 9458</span>&#160;    <span class="comment">//      N = 9  for p = 24 (IEEE single precision)</span></div><div class="line"><a name="l09459"></a><span class="lineno"> 9459</span>&#160;}</div><div class="ttc" id="namespacenlohmann_1_1detail_1_1dtoa__impl_html_ac1ea1316de0b4a219f707c76b1db1966"><div class="ttname"><a href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#ac1ea1316de0b4a219f707c76b1db1966">nlohmann::detail::dtoa_impl::kAlpha</a></div><div class="ttdeci">constexpr int kAlpha</div><div class="ttdef"><b>Definition:</b> <a href="jsonParser_8h_source.html#l08948">jsonParser.h:8948</a></div></div>
<div class="ttc" id="namespacenlohmann_1_1detail_1_1dtoa__impl_html_a4a750fcc38da1ce68b7e25ab3a230e20"><div class="ttname"><a href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a4a750fcc38da1ce68b7e25ab3a230e20">nlohmann::detail::dtoa_impl::kGamma</a></div><div class="ttdeci">constexpr int kGamma</div><div class="ttdef"><b>Definition:</b> <a href="jsonParser_8h_source.html#l08949">jsonParser.h:8949</a></div></div>
<div class="ttc" id="namespacenlohmann_1_1detail_1_1dtoa__impl_html_a9e66e6d0f072aa4fc0627bffc5b1cbd8"><div class="ttname"><a href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9e66e6d0f072aa4fc0627bffc5b1cbd8">nlohmann::detail::dtoa_impl::grisu2_round</a></div><div class="ttdeci">void grisu2_round(char *buf, int len, uint64_t dist, uint64_t delta, uint64_t rest, uint64_t ten_k)</div><div class="ttdef"><b>Definition:</b> <a href="jsonParser_8h_source.html#l09185">jsonParser.h:9185</a></div></div>
<div class="ttc" id="namespacenlohmann_1_1detail_1_1dtoa__impl_html_a264df2b5a7e19b864859161f3501155e"><div class="ttname"><a href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a264df2b5a7e19b864859161f3501155e">nlohmann::detail::dtoa_impl::find_largest_pow10</a></div><div class="ttdeci">int find_largest_pow10(const uint32_t n, uint32_t &amp;pow10)</div><div class="ttdef"><b>Definition:</b> <a href="jsonParser_8h_source.html#l09129">jsonParser.h:9129</a></div></div>
</div><!-- fragment -->
<p class="reference">Перекрестные ссылки <a class="el" href="jsonParser_8h_source.html#l08698">nlohmann::detail::dtoa_impl::diyfp::e</a>, <a class="el" href="jsonParser_8h_source.html#l08697">nlohmann::detail::dtoa_impl::diyfp::f</a>, <a class="el" href="jsonParser_8h_source.html#l09129">find_largest_pow10()</a>, <a class="el" href="jsonParser_8h_source.html#l09185">grisu2_round()</a>, <a class="el" href="jsonParser_8h_source.html#l08948">kAlpha</a>, <a class="el" href="jsonParser_8h_source.html#l08949">kGamma</a> и <a class="el" href="jsonParser_8h_source.html#l08707">nlohmann::detail::dtoa_impl::diyfp::sub()</a>.</p>

<p class="reference">Используется в <a class="el" href="jsonParser_8h_source.html#l09466">grisu2()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb_cgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb_cgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb_cgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb_cgraph">
<area shape="rect"  title=" " alt="" coords="5,71,160,112"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a264df2b5a7e19b864859161f3501155e" title=" " alt="" coords="208,5,381,47"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9e66e6d0f072aa4fc0627bffc5b1cbd8" title=" " alt="" coords="219,71,370,112"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#aeb26771af54ad73598c1a0430d65d884" title="returns x &#45; y" alt="" coords="219,136,370,177"/>
<area shape="rect"  href="structnlohmann_1_1detail_1_1dtoa__impl_1_1diyfp.html#a23d25b3ad4527270a6e3f2a0bcca11e6" title=" " alt="" coords="429,136,580,177"/>
</map>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb_icgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb_icgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb_icgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_a9b899c72b0e1e3dd46d75c2b4e6bcdfb_icgraph">
<area shape="rect"  title=" " alt="" coords="628,39,783,80"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a05b681dcb8569b9784c6dccfadb01633" title=" " alt="" coords="429,39,580,80"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#aab7a9670a4f4704a5d0347ad7588576b" title=" " alt="" coords="231,5,381,47"/>
<area shape="rect"  href="namespacenlohmann_1_1detail.html#a6192f1eab05fbbc5c35edb8368c8fc57" title="generates a decimal representation of the floating&#45;point number value in [first, last)." alt="" coords="238,71,374,112"/>
<area shape="rect"  href="classnlohmann_1_1detail_1_1serializer.html#a24b0fe45dc774441237bde198a133d8a" title=" " alt="" coords="5,71,183,112"/>
</map>
</div>

</div>
</div>
<a id="a9e66e6d0f072aa4fc0627bffc5b1cbd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e66e6d0f072aa4fc0627bffc5b1cbd8">&#9670;&nbsp;</a></span>grisu2_round()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void nlohmann::detail::dtoa_impl::grisu2_round </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a>&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>dist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>delta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>rest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>ten_k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="jsonParser_8h_source.html">jsonParser.h</a> строка <a class="el" href="jsonParser_8h_source.html#l09185">9185</a></p>
<div class="fragment"><div class="line"><a name="l09187"></a><span class="lineno"> 9187</span>&#160;{</div><div class="line"><a name="l09188"></a><span class="lineno"> 9188</span>&#160;    assert(len &gt;= 1);</div><div class="line"><a name="l09189"></a><span class="lineno"> 9189</span>&#160;    assert(dist &lt;= delta);</div><div class="line"><a name="l09190"></a><span class="lineno"> 9190</span>&#160;    assert(rest &lt;= delta);</div><div class="line"><a name="l09191"></a><span class="lineno"> 9191</span>&#160;    assert(ten_k &gt; 0);</div><div class="line"><a name="l09192"></a><span class="lineno"> 9192</span>&#160;</div><div class="line"><a name="l09193"></a><span class="lineno"> 9193</span>&#160;    <span class="comment">//               &lt;--------------------------- delta ----&gt;</span></div><div class="line"><a name="l09194"></a><span class="lineno"> 9194</span>&#160;    <span class="comment">//                                  &lt;---- dist ---------&gt;</span></div><div class="line"><a name="l09195"></a><span class="lineno"> 9195</span>&#160;    <span class="comment">// --------------[------------------+-------------------]--------------</span></div><div class="line"><a name="l09196"></a><span class="lineno"> 9196</span>&#160;    <span class="comment">//               M-                 w                   M+</span></div><div class="line"><a name="l09197"></a><span class="lineno"> 9197</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09198"></a><span class="lineno"> 9198</span>&#160;    <span class="comment">//                                  ten_k</span></div><div class="line"><a name="l09199"></a><span class="lineno"> 9199</span>&#160;    <span class="comment">//                                &lt;------&gt;</span></div><div class="line"><a name="l09200"></a><span class="lineno"> 9200</span>&#160;    <span class="comment">//                                       &lt;---- rest ----&gt;</span></div><div class="line"><a name="l09201"></a><span class="lineno"> 9201</span>&#160;    <span class="comment">// --------------[------------------+----+--------------]--------------</span></div><div class="line"><a name="l09202"></a><span class="lineno"> 9202</span>&#160;    <span class="comment">//                                  w    V</span></div><div class="line"><a name="l09203"></a><span class="lineno"> 9203</span>&#160;    <span class="comment">//                                       = buf * 10^k</span></div><div class="line"><a name="l09204"></a><span class="lineno"> 9204</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l09205"></a><span class="lineno"> 9205</span>&#160;    <span class="comment">// ten_k represents a unit-in-the-last-place in the decimal representation</span></div><div class="line"><a name="l09206"></a><span class="lineno"> 9206</span>&#160;    <span class="comment">// stored in buf.</span></div><div class="line"><a name="l09207"></a><span class="lineno"> 9207</span>&#160;    <span class="comment">// Decrement buf by ten_k while this takes buf closer to w.</span></div><div class="line"><a name="l09208"></a><span class="lineno"> 9208</span>&#160;</div><div class="line"><a name="l09209"></a><span class="lineno"> 9209</span>&#160;    <span class="comment">// The tests are written in this order to avoid overflow in unsigned</span></div><div class="line"><a name="l09210"></a><span class="lineno"> 9210</span>&#160;    <span class="comment">// integer arithmetic.</span></div><div class="line"><a name="l09211"></a><span class="lineno"> 9211</span>&#160;</div><div class="line"><a name="l09212"></a><span class="lineno"> 9212</span>&#160;    <span class="keywordflow">while</span> (rest &lt; dist</div><div class="line"><a name="l09213"></a><span class="lineno"> 9213</span>&#160;            and delta - rest &gt;= ten_k</div><div class="line"><a name="l09214"></a><span class="lineno"> 9214</span>&#160;            and (rest + ten_k &lt; dist or dist - rest &gt; rest + ten_k - dist))</div><div class="line"><a name="l09215"></a><span class="lineno"> 9215</span>&#160;    {</div><div class="line"><a name="l09216"></a><span class="lineno"> 9216</span>&#160;        assert(buf[len - 1] != <span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l09217"></a><span class="lineno"> 9217</span>&#160;        buf[len - 1]--;</div><div class="line"><a name="l09218"></a><span class="lineno"> 9218</span>&#160;        rest += ten_k;</div><div class="line"><a name="l09219"></a><span class="lineno"> 9219</span>&#160;    }</div><div class="line"><a name="l09220"></a><span class="lineno"> 9220</span>&#160;}</div></div><!-- fragment -->
<p class="reference">Используется в <a class="el" href="jsonParser_8h_source.html#l09226">grisu2_digit_gen()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacenlohmann_1_1detail_1_1dtoa__impl_a9e66e6d0f072aa4fc0627bffc5b1cbd8_icgraph.png" border="0" usemap="#namespacenlohmann_1_1detail_1_1dtoa__impl_a9e66e6d0f072aa4fc0627bffc5b1cbd8_icgraph" alt=""/></div>
<map name="namespacenlohmann_1_1detail_1_1dtoa__impl_a9e66e6d0f072aa4fc0627bffc5b1cbd8_icgraph" id="namespacenlohmann_1_1detail_1_1dtoa__impl_a9e66e6d0f072aa4fc0627bffc5b1cbd8_icgraph">
<area shape="rect"  title=" " alt="" coords="831,39,981,80"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a9b899c72b0e1e3dd46d75c2b4e6bcdfb" title=" " alt="" coords="628,39,783,80"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#a05b681dcb8569b9784c6dccfadb01633" title=" " alt="" coords="429,39,580,80"/>
<area shape="rect"  href="namespacenlohmann_1_1detail_1_1dtoa__impl.html#aab7a9670a4f4704a5d0347ad7588576b" title=" " alt="" coords="231,5,381,47"/>
<area shape="rect"  href="namespacenlohmann_1_1detail.html#a6192f1eab05fbbc5c35edb8368c8fc57" title="generates a decimal representation of the floating&#45;point number value in [first, last)." alt="" coords="238,71,374,112"/>
<area shape="rect"  href="classnlohmann_1_1detail_1_1serializer.html#a24b0fe45dc774441237bde198a133d8a" title=" " alt="" coords="5,71,183,112"/>
</map>
</div>

</div>
</div>
<a id="a1c5d30eb51e5e994a3f48bde104d2ce8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c5d30eb51e5e994a3f48bde104d2ce8">&#9670;&nbsp;</a></span>reinterpret_bits()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Target , typename Source &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">Target nlohmann::detail::dtoa_impl::reinterpret_bits </td>
          <td>(</td>
          <td class="paramtype">const Source&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="jsonParser_8h_source.html">jsonParser.h</a> строка <a class="el" href="jsonParser_8h_source.html#l08684">8684</a></p>
<div class="fragment"><div class="line"><a name="l08685"></a><span class="lineno"> 8685</span>&#160;{</div><div class="line"><a name="l08686"></a><span class="lineno"> 8686</span>&#160;    static_assert(<span class="keyword">sizeof</span>(Target) == <span class="keyword">sizeof</span>(Source), <span class="stringliteral">&quot;size mismatch&quot;</span>);</div><div class="line"><a name="l08687"></a><span class="lineno"> 8687</span>&#160;</div><div class="line"><a name="l08688"></a><span class="lineno"> 8688</span>&#160;    Target target;</div><div class="line"><a name="l08689"></a><span class="lineno"> 8689</span>&#160;    std::memcpy(&amp;target, &amp;source, <span class="keyword">sizeof</span>(Source));</div><div class="line"><a name="l08690"></a><span class="lineno"> 8690</span>&#160;    <span class="keywordflow">return</span> target;</div><div class="line"><a name="l08691"></a><span class="lineno"> 8691</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Переменные</h2>
<a id="ac1ea1316de0b4a219f707c76b1db1966"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1ea1316de0b4a219f707c76b1db1966">&#9670;&nbsp;</a></span>kAlpha</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> nlohmann::detail::dtoa_impl::kAlpha = -60</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="jsonParser_8h_source.html">jsonParser.h</a> строка <a class="el" href="jsonParser_8h_source.html#l08948">8948</a></p>

<p class="reference">Используется в <a class="el" href="jsonParser_8h_source.html#l08965">get_cached_power_for_binary_exponent()</a> и <a class="el" href="jsonParser_8h_source.html#l09226">grisu2_digit_gen()</a>.</p>

</div>
</div>
<a id="a4a750fcc38da1ce68b7e25ab3a230e20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a750fcc38da1ce68b7e25ab3a230e20">&#9670;&nbsp;</a></span>kGamma</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="testGlobalFuncMock_8h.html#a882197d618d1823462b68dc16270232c">int</a> nlohmann::detail::dtoa_impl::kGamma = -32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="jsonParser_8h_source.html">jsonParser.h</a> строка <a class="el" href="jsonParser_8h_source.html#l08949">8949</a></p>

<p class="reference">Используется в <a class="el" href="jsonParser_8h_source.html#l08965">get_cached_power_for_binary_exponent()</a> и <a class="el" href="jsonParser_8h_source.html#l09226">grisu2_digit_gen()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Документация по Fiscat. Последние изменения: Ср 20 Фев 2019 10:18:46. Создано системой &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
