<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fiscat: Исходный файл src/appl/include/license.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header-kassa-f.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fiscat
   </div>
   <div id="projectbrief">FisGo software documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.15 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Поиск');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_76b35da2834f19780dcc0714860bf08b.html">appl</a></li><li class="navelem"><a class="el" href="dir_bb711a79b41aea710db94ca969b05ed5.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">license.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="license_8h.html">См. документацию.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef LICENCE_H_</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define LICENCE_H_</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log_8h.html">log.h</a>&quot;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="convert_8h.html">convert.h</a>&quot;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="classLicense.html">   15</a></span>&#160;<span class="keyword">class </span><a class="code" href="classLicense.html">License</a></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;{</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="classLicense.html#a3bae6be768f609b7629ccd5a68c92bd2">   18</a></span>&#160;    <span class="keyword">const</span> int64_t DATE_OVERDUE_SERVICES = 30 * <a class="code" href="classConvert.html#ac6e84925add552a23fadcd8a177975e7a98ca94d876c1facc6cd88204e1c8932c">Convert::TIME_HOUR_IN_DAY</a> * <a class="code" href="classConvert.html#ac6e84925add552a23fadcd8a177975e7a5b5e3d50b0d6cb2a589f6a4402c034a5">Convert::TIME_MIN_IN_HOUR</a> * <a class="code" href="classConvert.html#ac6e84925add552a23fadcd8a177975e7a10754cc0144fae99de378646bceea691">Convert::TIME_SEC_IN_MIN</a>;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="classLicense.html#aefe70a2b6b86e5a90ac972c02d64d597">   20</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="classLicense.html#aefe70a2b6b86e5a90ac972c02d64d597">LICENSE_TAG</a></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    {</div><div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="classLicense.html#aefe70a2b6b86e5a90ac972c02d64d597a59fad907668c722be937545c94f8035d">   22</a></span>&#160;        LICENSE_TAG_NDS_20_120 = 1,</div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="classLicense.html#aefe70a2b6b86e5a90ac972c02d64d597adc69bcd6e3fa5fbc51393d5d6b41b601">   23</a></span>&#160;        LICENSE_TAG_FFD_1_05   = 3,</div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="classLicense.html#aefe70a2b6b86e5a90ac972c02d64d597a8b77b641c1deae13bf7770c9f9b1c0b1">   24</a></span>&#160;        LICENSE_TAG_TOBACCO    = 4</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    };</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="classLicense.html#a0abf070b8991f87f23b6f2493a7093a3">   26</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> int16_t ACTIVE = 0x03;</div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="structLicense_1_1LicenseTag.html">   30</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structLicense_1_1LicenseTag.html">LicenseTag</a></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    {</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <a class="code" href="structLicense_1_1LicenseTag.html">LicenseTag</a>() = <span class="keywordflow">default</span>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="structLicense_1_1LicenseTag.html#ab8df842843a6a9036949db1e72302400">   34</a></span>&#160;        <a class="code" href="structLicense_1_1LicenseTag.html#ab8df842843a6a9036949db1e72302400">LicenseTag</a>(int16_t    newTagNum,</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                   int16_t      newMask,</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                   <span class="keywordtype">string</span>       newName,</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                   <span class="keywordtype">string</span> newExpireDate)</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        {</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            tagNum     =     newTagNum;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            mask       =       newMask;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            name       =       newName;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            expireDate = newExpireDate;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        }</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="structLicense_1_1LicenseTag.html#a21f226eb55537cb09310036125f7936f">   45</a></span>&#160;        int16_t    tagNum = -1;</div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="structLicense_1_1LicenseTag.html#a2e83949ec1cf16db9b17085103be5341">   46</a></span>&#160;        int16_t      mask = -1;</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="structLicense_1_1LicenseTag.html#ac8883a3d60d1a55a7961aa0bb667e599">   47</a></span>&#160;        <span class="keywordtype">string</span>       <a class="code" href="structLicense_1_1LicenseTag.html#ac8883a3d60d1a55a7961aa0bb667e599">name</a>;</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="structLicense_1_1LicenseTag.html#a84509dc7bbd8fcc54a7ffb52aad88b4c">   48</a></span>&#160;        <span class="keywordtype">string</span> <a class="code" href="structLicense_1_1LicenseTag.html#a84509dc7bbd8fcc54a7ffb52aad88b4c">expireDate</a>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="structLicense_1_1LicenseTag.html#a280a396ebbc77d2df20f129da7cc5122">   50</a></span>&#160;        int64_t expireDateSec = 0;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    };</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="classLicense.html#a64a0508a88f223e1b2f706f94bb4ac63">   53</a></span>&#160;    <a class="code" href="classLicense.html#a64a0508a88f223e1b2f706f94bb4ac63">License</a>()</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        _convert.reset(<span class="keyword">new</span> <a class="code" href="classConvert.html">Convert</a>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    }</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="classLicense.html#a20da1981f1ba1e230afbd62dfd826a58">   58</a></span>&#160;    <a class="code" href="classLicense.html#a20da1981f1ba1e230afbd62dfd826a58">License</a>(<span class="keyword">const</span> <a class="code" href="classLicense.html">License</a> &amp;obj)</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        _keyActivation = obj.<a class="code" href="classLicense.html#a952f2fb457daf6a60af517cc335e14d7">_keyActivation</a>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        _licenseList   = obj.<a class="code" href="classLicense.html#a354a8ea4276aa8f2794fa0a1a81486a6">_licenseList</a>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="classLicense.html#a347839f049599ef744c55f8e54f68993">   67</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classLicense.html#a347839f049599ef744c55f8e54f68993">clear</a>() { _licenseList.clear(); }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="classLicense.html#ad0f037a7fe472c26db3e1e5e763c001c">   73</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="classLicense.html#ad0f037a7fe472c26db3e1e5e763c001c">size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _licenseList.size(); }</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classLicense.html#a5ef911c93f4add75ca7217df8271eda4">   79</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classLicense.html#a5ef911c93f4add75ca7217df8271eda4">empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _licenseList.empty(); }</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classLicense.html#a760804fd30c6ef3e114e222bb6f700d8">   86</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classLicense.html#a760804fd30c6ef3e114e222bb6f700d8">isTagExistAndValid</a>( <span class="keyword">const</span> int16_t &amp;tagNumber)</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;lic : _licenseList)</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="keywordflow">if</span>(lic.tagNum == tagNumber) <span class="comment">// Такой тэг есть в активационном ключе</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                <span class="keywordflow">if</span>(lic.mask != ACTIVE )</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                    <a class="code" href="log_8h.html#ab00dd66449102a6d5f35f8c9687892f7">logDBG</a>(<span class="stringliteral">&quot;%s:: Данная фича есть в ключе, но не активна! mask = %d&quot;</span>, __PRETTY_FUNCTION__, lic.mask);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classLicense.html#a256cdc19062818167eb290fd49317d77">  106</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classLicense.html#a256cdc19062818167eb290fd49317d77">showLicense</a>()</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <a class="code" href="log_8h.html#a5cc587e7c622e9e5d18ec948255c1b11">logERR</a>(<span class="stringliteral">&quot;=========== Лицензия ===========&quot;</span>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; it : _licenseList)</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keywordtype">string</span> date = it.expireDate.empty() ? <span class="stringliteral">&quot;Бессрочно&quot;</span> : it.expireDate;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <a class="code" href="log_8h.html#a5cc587e7c622e9e5d18ec948255c1b11">logERR</a>( <span class="stringliteral">&quot;%u)\t mask = %u,\t expire date = &#39;%s&#39;,\t name = &#39;%s&#39;&quot;</span>,</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                    it.tagNum,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                    it.mask,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                    date   .c_str(),</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                    it.name.c_str() );</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="log_8h.html#a5cc587e7c622e9e5d18ec948255c1b11">logERR</a>(<span class="stringliteral">&quot;================================&quot;</span>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="classLicense.html#a72d30ae5ff13769d8ba3f9d783e4c9ff">  125</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classLicense.html#a72d30ae5ff13769d8ba3f9d783e4c9ff">addTag</a>(<a class="code" href="structLicense_1_1LicenseTag.html">LicenseTag</a> newLic)</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; it : _licenseList)</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">if</span>(it.tagNum == newLic.<a class="code" href="structLicense_1_1LicenseTag.html#a21f226eb55537cb09310036125f7936f">tagNum</a>)</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        _licenseList.push_back(newLic);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="classLicense.html#a1427444bc19dd3215bbdd1c1ccdff3ee">  143</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classLicense.html#a1427444bc19dd3215bbdd1c1ccdff3ee">getTag</a>(<span class="keyword">const</span> int16_t &amp;tagNumber, <a class="code" href="structLicense_1_1LicenseTag.html">LicenseTag</a> &amp;licenseTag)</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">for</span>(<a class="code" href="structLicense_1_1LicenseTag.html">LicenseTag</a> &amp;license : _licenseList)</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">if</span>(license.tagNum == tagNumber)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                licenseTag = license;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="log_8h.html#a5cc587e7c622e9e5d18ec948255c1b11">logERR</a>(<span class="stringliteral">&quot;%s:: Такого тега в структуре лицензии нет: №%d&quot;</span>, __PRETTY_FUNCTION__, tagNumber);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="classLicense.html#a11131246592e58f1e238b0c2ba2d3c1c">  161</a></span>&#160;    <span class="keyword">inline</span> vector&lt;LicenseTag&gt; <a class="code" href="classLicense.html#a11131246592e58f1e238b0c2ba2d3c1c">getLicList</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _licenseList; }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classLicense.html#a0bcec55fc672ee2d39536bed03e0db05">  166</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="classLicense.html#a0bcec55fc672ee2d39536bed03e0db05">LICENSE_TAG_STATUS</a></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    {</div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="classLicense.html#a0bcec55fc672ee2d39536bed03e0db05a7bb85eb7465d112ac456f1925cb6c5b8">  168</a></span>&#160;        LICENSE_TAG_STATUS_ERROR   = -1,</div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classLicense.html#a0bcec55fc672ee2d39536bed03e0db05a11fb87483980de6bf6ffed51bf148a5c">  169</a></span>&#160;        LICENSE_TAG_STATUS_DISABLE =  0,</div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classLicense.html#a0bcec55fc672ee2d39536bed03e0db05a9dd7bc04134ec13e4224707174fb0d70">  170</a></span>&#160;        LICENSE_TAG_STATUS_ENABLE  =  3,</div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="classLicense.html#a0bcec55fc672ee2d39536bed03e0db05a798bf75a1abef629477c7b6be899b7a6">  171</a></span>&#160;        LICENSE_TAG_STATUS_EXPIRED =  1</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    };</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="classLicense.html#af1fca32f593ef008b5e50e6709469488">  181</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classLicense.html#af1fca32f593ef008b5e50e6709469488">getTagsByStatus</a>(vector&lt;LicenseTag&gt; &amp;licenseTag, int16_t status)</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        licenseTag.clear();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code" href="structLicense_1_1LicenseTag.html">LicenseTag</a> &amp;license : _licenseList)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">if</span> (license.mask == status)</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                licenseTag.push_back(license);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">return</span> !(licenseTag.empty());</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="classLicense.html#a613066d94ecbf5a1ffba46bb1ff87886">  196</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classLicense.html#a613066d94ecbf5a1ffba46bb1ff87886">daysLeft</a>( <a class="code" href="structLicense_1_1LicenseTag.html">LicenseTag</a> &amp;licenseTag )</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">if</span>(!_convert)</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <a class="code" href="log_8h.html#a5cc587e7c622e9e5d18ec948255c1b11">logERR</a>(<span class="stringliteral">&quot;%s Null ptr!&quot;</span>, __PRETTY_FUNCTION__);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordtype">string</span> strExpireDays = licenseTag.<a class="code" href="structLicense_1_1LicenseTag.html#a84509dc7bbd8fcc54a7ffb52aad88b4c">expireDate</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        strExpireDays.erase(remove(strExpireDays.begin(), strExpireDays.end(), <span class="charliteral">&#39;.&#39;</span>), strExpireDays.end());</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        strExpireDays += <span class="stringliteral">&quot;0000&quot;</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        _convert-&gt;dateLessSelected(_convert-&gt;getStringCurTime(), strExpireDays, DATE_OVERDUE_SERVICES, licenseTag.<a class="code" href="structLicense_1_1LicenseTag.html#a280a396ebbc77d2df20f129da7cc5122">expireDateSec</a>);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="log_8h.html#a5cc587e7c622e9e5d18ec948255c1b11">logERR</a>(<span class="stringliteral">&quot;%s Expire date seconds : %lld&quot;</span>, __PRETTY_FUNCTION__, licenseTag.<a class="code" href="structLicense_1_1LicenseTag.html#a280a396ebbc77d2df20f129da7cc5122">expireDateSec</a>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">if</span>(licenseTag.<a class="code" href="structLicense_1_1LicenseTag.html#a280a396ebbc77d2df20f129da7cc5122">expireDateSec</a> &gt;= DATE_OVERDUE_SERVICES)</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;до &quot;</span> + licenseTag.<a class="code" href="structLicense_1_1LicenseTag.html#a84509dc7bbd8fcc54a7ffb52aad88b4c">expireDate</a>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">return</span> _convert-&gt;getStringExpireDays(licenseTag.<a class="code" href="structLicense_1_1LicenseTag.html#a280a396ebbc77d2df20f129da7cc5122">expireDateSec</a>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="classLicense.html#a952f2fb457daf6a60af517cc335e14d7">  218</a></span>&#160;    <span class="keywordtype">string</span>               <a class="code" href="classLicense.html#a952f2fb457daf6a60af517cc335e14d7">_keyActivation</a>;</div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="classLicense.html#a354a8ea4276aa8f2794fa0a1a81486a6">  219</a></span>&#160;    vector &lt;LicenseTag&gt;    <a class="code" href="classLicense.html#a354a8ea4276aa8f2794fa0a1a81486a6">_licenseList</a>;</div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="classLicense.html#ad699a28d13092b0e9f3de80e97d8c7d4">  220</a></span>&#160;    unique_ptr&lt;Convert&gt;        <a class="code" href="classLicense.html#ad699a28d13092b0e9f3de80e97d8c7d4">_convert</a>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;};</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="classLicense_html_a347839f049599ef744c55f8e54f68993"><div class="ttname"><a href="classLicense.html#a347839f049599ef744c55f8e54f68993">License::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">clear - очистка списка услуг</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00067">license.h:67</a></div></div>
<div class="ttc" id="structLicense_1_1LicenseTag_html"><div class="ttname"><a href="structLicense_1_1LicenseTag.html">License::LicenseTag</a></div><div class="ttdoc">The LicenseTag struct - структура для одного тэга</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00030">license.h:30</a></div></div>
<div class="ttc" id="classLicense_html_a760804fd30c6ef3e114e222bb6f700d8"><div class="ttname"><a href="classLicense.html#a760804fd30c6ef3e114e222bb6f700d8">License::isTagExistAndValid</a></div><div class="ttdeci">virtual bool isTagExistAndValid(const int16_t &amp;tagNumber)</div><div class="ttdoc">isTagExistAndValid - проверка наличия тэга в векторе</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00086">license.h:86</a></div></div>
<div class="ttc" id="classConvert_html"><div class="ttname"><a href="classConvert.html">Convert</a></div><div class="ttdef"><b>Definition:</b> <a href="convert_8h_source.html#l00026">convert.h:26</a></div></div>
<div class="ttc" id="classLicense_html_a5ef911c93f4add75ca7217df8271eda4"><div class="ttname"><a href="classLicense.html#a5ef911c93f4add75ca7217df8271eda4">License::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">empty - проверка вектора на пустоту</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00079">license.h:79</a></div></div>
<div class="ttc" id="classLicense_html_a64a0508a88f223e1b2f706f94bb4ac63"><div class="ttname"><a href="classLicense.html#a64a0508a88f223e1b2f706f94bb4ac63">License::License</a></div><div class="ttdeci">License()</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00053">license.h:53</a></div></div>
<div class="ttc" id="classLicense_html_a952f2fb457daf6a60af517cc335e14d7"><div class="ttname"><a href="classLicense.html#a952f2fb457daf6a60af517cc335e14d7">License::_keyActivation</a></div><div class="ttdeci">string _keyActivation</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00218">license.h:218</a></div></div>
<div class="ttc" id="classLicense_html_af1fca32f593ef008b5e50e6709469488"><div class="ttname"><a href="classLicense.html#af1fca32f593ef008b5e50e6709469488">License::getTagsByStatus</a></div><div class="ttdeci">bool getTagsByStatus(vector&lt; LicenseTag &gt; &amp;licenseTag, int16_t status)</div><div class="ttdoc">Получение тегов c определенным статусом</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00181">license.h:181</a></div></div>
<div class="ttc" id="classConvert_html_ac6e84925add552a23fadcd8a177975e7a10754cc0144fae99de378646bceea691"><div class="ttname"><a href="classConvert.html#ac6e84925add552a23fadcd8a177975e7a10754cc0144fae99de378646bceea691">Convert::TIME_SEC_IN_MIN</a></div><div class="ttdef"><b>Definition:</b> <a href="convert_8h_source.html#l00033">convert.h:33</a></div></div>
<div class="ttc" id="structLicense_1_1LicenseTag_html_a84509dc7bbd8fcc54a7ffb52aad88b4c"><div class="ttname"><a href="structLicense_1_1LicenseTag.html#a84509dc7bbd8fcc54a7ffb52aad88b4c">License::LicenseTag::expireDate</a></div><div class="ttdeci">string expireDate</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00048">license.h:48</a></div></div>
<div class="ttc" id="structLicense_1_1LicenseTag_html_ac8883a3d60d1a55a7961aa0bb667e599"><div class="ttname"><a href="structLicense_1_1LicenseTag.html#ac8883a3d60d1a55a7961aa0bb667e599">License::LicenseTag::name</a></div><div class="ttdeci">string name</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00047">license.h:47</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="jsonParser_8h_source.html#l18798">jsonParser.h:18798</a></div></div>
<div class="ttc" id="classLicense_html_a1427444bc19dd3215bbdd1c1ccdff3ee"><div class="ttname"><a href="classLicense.html#a1427444bc19dd3215bbdd1c1ccdff3ee">License::getTag</a></div><div class="ttdeci">bool getTag(const int16_t &amp;tagNumber, LicenseTag &amp;licenseTag)</div><div class="ttdoc">getTag - получить тэг по индексу</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00143">license.h:143</a></div></div>
<div class="ttc" id="classLicense_html_a354a8ea4276aa8f2794fa0a1a81486a6"><div class="ttname"><a href="classLicense.html#a354a8ea4276aa8f2794fa0a1a81486a6">License::_licenseList</a></div><div class="ttdeci">vector&lt; LicenseTag &gt; _licenseList</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00219">license.h:219</a></div></div>
<div class="ttc" id="structLicense_1_1LicenseTag_html_a21f226eb55537cb09310036125f7936f"><div class="ttname"><a href="structLicense_1_1LicenseTag.html#a21f226eb55537cb09310036125f7936f">License::LicenseTag::tagNum</a></div><div class="ttdeci">int16_t tagNum</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00045">license.h:45</a></div></div>
<div class="ttc" id="classLicense_html"><div class="ttname"><a href="classLicense.html">License</a></div><div class="ttdoc">The License class - класс для обработки платных услуг</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00015">license.h:15</a></div></div>
<div class="ttc" id="classLicense_html_aefe70a2b6b86e5a90ac972c02d64d597"><div class="ttname"><a href="classLicense.html#aefe70a2b6b86e5a90ac972c02d64d597">License::LICENSE_TAG</a></div><div class="ttdeci">LICENSE_TAG</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00020">license.h:20</a></div></div>
<div class="ttc" id="structLicense_1_1LicenseTag_html_ab8df842843a6a9036949db1e72302400"><div class="ttname"><a href="structLicense_1_1LicenseTag.html#ab8df842843a6a9036949db1e72302400">License::LicenseTag::LicenseTag</a></div><div class="ttdeci">LicenseTag(int16_t newTagNum, int16_t newMask, string newName, string newExpireDate)</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00034">license.h:34</a></div></div>
<div class="ttc" id="classConvert_html_ac6e84925add552a23fadcd8a177975e7a5b5e3d50b0d6cb2a589f6a4402c034a5"><div class="ttname"><a href="classConvert.html#ac6e84925add552a23fadcd8a177975e7a5b5e3d50b0d6cb2a589f6a4402c034a5">Convert::TIME_MIN_IN_HOUR</a></div><div class="ttdef"><b>Definition:</b> <a href="convert_8h_source.html#l00034">convert.h:34</a></div></div>
<div class="ttc" id="classLicense_html_ad0f037a7fe472c26db3e1e5e763c001c"><div class="ttname"><a href="classLicense.html#ad0f037a7fe472c26db3e1e5e763c001c">License::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">size - получить размер списка услуг</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00073">license.h:73</a></div></div>
<div class="ttc" id="classLicense_html_a613066d94ecbf5a1ffba46bb1ff87886"><div class="ttname"><a href="classLicense.html#a613066d94ecbf5a1ffba46bb1ff87886">License::daysLeft</a></div><div class="ttdeci">virtual string daysLeft(LicenseTag &amp;licenseTag)</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00196">license.h:196</a></div></div>
<div class="ttc" id="classLicense_html_a256cdc19062818167eb290fd49317d77"><div class="ttname"><a href="classLicense.html#a256cdc19062818167eb290fd49317d77">License::showLicense</a></div><div class="ttdeci">void showLicense()</div><div class="ttdoc">showLicense - вывод всех услуг в лог и консоль</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00106">license.h:106</a></div></div>
<div class="ttc" id="classLicense_html_a20da1981f1ba1e230afbd62dfd826a58"><div class="ttname"><a href="classLicense.html#a20da1981f1ba1e230afbd62dfd826a58">License::License</a></div><div class="ttdeci">License(const License &amp;obj)</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00058">license.h:58</a></div></div>
<div class="ttc" id="structLicense_1_1LicenseTag_html_a280a396ebbc77d2df20f129da7cc5122"><div class="ttname"><a href="structLicense_1_1LicenseTag.html#a280a396ebbc77d2df20f129da7cc5122">License::LicenseTag::expireDateSec</a></div><div class="ttdeci">int64_t expireDateSec</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00050">license.h:50</a></div></div>
<div class="ttc" id="classLicense_html_ad699a28d13092b0e9f3de80e97d8c7d4"><div class="ttname"><a href="classLicense.html#ad699a28d13092b0e9f3de80e97d8c7d4">License::_convert</a></div><div class="ttdeci">unique_ptr&lt; Convert &gt; _convert</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00220">license.h:220</a></div></div>
<div class="ttc" id="classLicense_html_a72d30ae5ff13769d8ba3f9d783e4c9ff"><div class="ttname"><a href="classLicense.html#a72d30ae5ff13769d8ba3f9d783e4c9ff">License::addTag</a></div><div class="ttdeci">void addTag(LicenseTag newLic)</div><div class="ttdoc">addTag - добавить тэг</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00125">license.h:125</a></div></div>
<div class="ttc" id="classLicense_html_a0bcec55fc672ee2d39536bed03e0db05"><div class="ttname"><a href="classLicense.html#a0bcec55fc672ee2d39536bed03e0db05">License::LICENSE_TAG_STATUS</a></div><div class="ttdeci">LICENSE_TAG_STATUS</div><div class="ttdoc">Статусы лицензионных тегов</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00166">license.h:166</a></div></div>
<div class="ttc" id="classLicense_html_a11131246592e58f1e238b0c2ba2d3c1c"><div class="ttname"><a href="classLicense.html#a11131246592e58f1e238b0c2ba2d3c1c">License::getLicList</a></div><div class="ttdeci">vector&lt; LicenseTag &gt; getLicList() const</div><div class="ttdoc">getLicList - получить копию списка тэгов</div><div class="ttdef"><b>Definition:</b> <a href="license_8h_source.html#l00161">license.h:161</a></div></div>
<div class="ttc" id="log_8h_html_ab00dd66449102a6d5f35f8c9687892f7"><div class="ttname"><a href="log_8h.html#ab00dd66449102a6d5f35f8c9687892f7">logDBG</a></div><div class="ttdeci">#define logDBG( fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00034">log.h:34</a></div></div>
<div class="ttc" id="classConvert_html_ac6e84925add552a23fadcd8a177975e7a98ca94d876c1facc6cd88204e1c8932c"><div class="ttname"><a href="classConvert.html#ac6e84925add552a23fadcd8a177975e7a98ca94d876c1facc6cd88204e1c8932c">Convert::TIME_HOUR_IN_DAY</a></div><div class="ttdef"><b>Definition:</b> <a href="convert_8h_source.html#l00035">convert.h:35</a></div></div>
<div class="ttc" id="log_8h_html"><div class="ttname"><a href="log_8h.html">log.h</a></div></div>
<div class="ttc" id="log_8h_html_a5cc587e7c622e9e5d18ec948255c1b11"><div class="ttname"><a href="log_8h.html#a5cc587e7c622e9e5d18ec948255c1b11">logERR</a></div><div class="ttdeci">#define logERR( fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00033">log.h:33</a></div></div>
<div class="ttc" id="convert_8h_html"><div class="ttname"><a href="convert_8h.html">convert.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Документация по Fiscat. Последние изменения: Ср 20 Фев 2019 10:18:41. Создано системой &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
